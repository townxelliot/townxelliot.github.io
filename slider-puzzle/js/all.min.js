function FastClick(e){var t,n=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=e;if(!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)};if(FastClick.notNeeded(e))return;this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchend"
,this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null)}function getGlobal(){return function(){return this.dust}.call(null)}(function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("Q",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()})(function(){function i(e){var t=Function.call;return function(){return t.apply(e,arguments)}}function p(e){return h(e)==="[object StopIteration]"||
e instanceof d}function m(e,t){t.stack&&typeof e=="object"&&e!==null&&e.stack&&e.stack.indexOf(v)===-1&&(e.stack=g(e.stack)+"\n"+v+"\n"+g(t.stack))}function g(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!b(i)&&!y(i)&&n.push(i)}return n.join("\n")}function y(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function b(n){var r=/at .+ \((.*):(\d+):\d+\)/.exec(n);if(!r)return!1;var i=r[1],s=r[2];return i===t&&s>=e&&s<=pt}function w(){if(Error.captureStackTrace){var e,n,r=Error.prepareStackTrace;return Error.prepareStackTrace=function(t,r){e=r[1].getFileName(),n=r[1].getLineNumber()},(new Error).stack,Error.prepareStackTrace=r,t=e,n}}function E(e){return j(e)}function S(){function a(i){n=i,o(e,function(e,t){r(function(){i.promiseDispatch.apply(i,t)})},void 0),e=void 0,t=void 0}var e=[],t=[],n,i=f(S.prototype),u=f(T.prototype);return u.promiseDispatch=function(i,o,u){var a=s(arguments);e?(e.push(a),o==="when"&&u[1]&&t.push(u[1])):r(function(){n.promiseDispatch
.apply(n,a)})},u.valueOf=function(){if(e)return u;var t=N(n);return C(t)&&(n=t),t},Error.captureStackTrace&&E.longStackJumpLimit>0&&(Error.captureStackTrace(u,S),u.stack=u.stack.substring(u.stack.indexOf("\n")+1)),i.promise=u,i.resolve=function(e){if(n)return;a(j(e))},i.fulfill=function(e){if(n)return;a(B(e))},i.reject=function(e){if(n)return;a(H(e))},i.notify=function(e){if(n)return;o(t,function(t,n){r(function(){n(e)})},void 0)},i}function x(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=S();return Q(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function T(e,t,n,r,i){t===void 0&&(t=function(e){return H(new Error("Promise does not support operation: "+e))});var s=f(T.prototype);return s.promiseDispatch=function(n,r,i){var o;try{e[r]?o=e[r].apply(s,i):o=t.call(s,r,i)}catch(u){o=H(u)}n&&n(o)},n&&(s.valueOf=n),i&&(s.exception=r),s}function N(e){return C(e)?e.valueOf():e}function C(e){return e&&typeof e.promiseDispatch=="function"}function k(
e){return e&&typeof e.then=="function"}function L(e){return!A(e)&&!O(e)}function A(e){return!k(N(e))}function O(e){return e=N(e),C(e)&&"exception"in e}function P(){!D&&typeof window!="undefined"&&!window.Touch&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",M),D=!0}function H(e){var t=T({when:function(t){if(t){var n=u(_,this);n!==-1&&(_.splice(n,1),M.splice(n,1))}return t?t(e):this}},function(){return H(e)},function n(){return this},e,!0);return P(),_.push(t),M.push(e),t}function B(e){return T({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return c(e)}},void 0,function t(){return e})}function j(e){return C(e)?e:(e=N(e),k(e)?F(e):B(e))}function F(e){var t=S();return r(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise
}function I(e){return T({isDef:function(){}},function(n,r){return X(e,n,r)},function(){return N(e)})}function q(e,t,n,i){function u(e){try{return typeof t=="function"?t(e):e}catch(n){return H(n)}}function a(e){if(typeof n=="function"){m(e,l);try{return n(e)}catch(t){return H(t)}}return H(e)}function f(e){return typeof i=="function"?i(e):e}var s=S(),o=!1,l=j(e);return r(function(){l.promiseDispatch(function(e){if(o)return;o=!0,s.resolve(u(e))},"when",[function(e){if(o)return;o=!0,s.resolve(a(e))}])}),l.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=f(e)}catch(r){n=!0;if(!E.onerror)throw r;E.onerror(r)}n||s.notify(t)}]),s.promise}function R(e,t,n){return q(e,function(e){return Y(e).then(function(e){return t.apply(void 0,e)},n)},n)}function U(e){return function(){function t(e,t){var s;try{s=n[e](t)}catch(o){return p(o)?o.value:H(o)}return q(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}}function z(e){throw new d(e)}function W(e){
return function(){return R([this,Y(arguments)],function(t,n){return e.apply(t,n)})}}function X(e,t,n){var i=S();return r(function(){j(e).promiseDispatch(i.resolve,t,n)}),i.promise}function V(e){return function(t){var n=s(arguments,1);return X(t,e,n)}}function J(e,t){var n=s(arguments,2);return $(e,t,n)}function K(e,t){return X(e,"apply",[void 0,t])}function Q(e){var t=s(arguments,1);return K(e,t)}function G(e){var t=s(arguments,1);return function(){var r=t.concat(s(arguments));return X(e,"apply",[this,r])}}function Y(e){return q(e,function(e){var t=0,n=S();return o(e,function(r,i,s){A(i)?e[s]=N(i):(++t,q(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject))},void 0),t===0&&n.resolve(e),n.promise})}function Z(e){return q(e,function(e){return e=a(e,j),q(Y(a(e,function(e){return q(e,n,n)})),function(){return e})})}function et(e,t){return q(e,void 0,t)}function tt(e,t){return q(e,void 0,void 0,t)}function nt(e,t){return q(e,function(e){return q(t(),function(){return e})},function(e){return q
(t(),function(){return H(e)})})}function rt(e,t,n,i){var s=function(t){r(function(){m(t,e);if(!E.onerror)throw t;E.onerror(t)})},o=t||n||i?q(e,t,n,i):e;typeof process=="object"&&process&&process.domain&&(s=process.domain.bind(s)),et(o,s)}function it(e,t,n){var r=S(),i=setTimeout(function(){r.reject(new Error(n||"Timed out after "+t+" ms"))},t);return q(e,function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.promise}function st(e,t){t===void 0&&(t=e,e=void 0);var n=S();return q(e,undefined,undefined,n.notify),setTimeout(function(){n.resolve(e)},t),n.promise}function ot(e,t){var n=s(t),r=S();return n.push(r.makeNodeResolver()),K(e,n).fail(r.reject),r.promise}function ut(e){var t=s(arguments,1),n=S();return t.push(n.makeNodeResolver()),K(e,t).fail(n.reject),n.promise}function at(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments)),r=S();return n.push(r.makeNodeResolver()),K(e,n).fail(r.reject),r.promise}}function ft(e,t){var n=s(arguments
,2);return function(){function o(){return e.apply(t,arguments)}var r=n.concat(s(arguments)),i=S();return r.push(i.makeNodeResolver()),K(o,r).fail(i.reject),i.promise}}function lt(e,t,n){var r=s(n||[]),i=S();return r.push(i.makeNodeResolver()),$(e,t,r).fail(i.reject),i.promise}function ct(e,t){var n=s(arguments,2),r=S();return n.push(r.makeNodeResolver()),$(e,t,n).fail(r.reject),r.promise}function ht(e,t){if(!t)return e;e.then(function(e){r(function(){t(null,e)})},function(e){r(function(){t(e)})})}var e=w(),t,n=function(){},r;typeof setImmediate=="function"?typeof window!="undefined"?r=setImmediate.bind(window):r=setImmediate:typeof process!="undefined"&&process.nextTick?r=process.nextTick:function(){function a(){--i;if(++o>=n){o=0,n*=4;var t=s&&Math.min(s-1,n);while(i<t)++i,u()}while(s){--s,e=e.next;var r=e.task;e.task=void 0,r()}o=0}var e={task:void 0,next:null},t=e,n=2,i=0,s=0,o=0,u=void 0;r=function(e){t=t.next={task:e,next:null},i<++s&&i<n&&(++i,u())};if(typeof MessageChannel!="undefined"
){var f=new MessageChannel;f.port1.onmessage=a,u=function(){f.port2.postMessage(0)}}else u=function(){setTimeout(a,0)}}();var s=i(Array.prototype.slice),o=i(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),u=i(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),a=i(Array.prototype.map||function(e,t){var n=this,r=[];return o(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),f=Object.create||function(e){function t(){}return t.prototype=e,new t},l=i(Object.prototype.hasOwnProperty),c=Object.keys||function(e){var t=[];for(var n in e)l(e,n)&&t.push(n);return t},h=i(Object.prototype.toString),d;typeof ReturnValue!="undefined"?d=ReturnValue:d=function(e){this.value=e},E.longStackJumpLimit=1;var v="From previous event:";E.nextTick=r,E.defer=S,S.prototype.makeNodeResolver=function(
){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(s(arguments,1)):e.resolve(n)}},E.promise=x,E.makePromise=T,T.prototype.then=function(e,t,n){return q(this,e,t,n)},T.prototype.thenResolve=function(e){return q(this,function(){return e})},T.prototype.thenReject=function(e){return q(this,function(){throw e})},o(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","set","del","delete","post","send","invoke","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","npost","nsend","ninvoke","nodeify"],function(e,t){T.prototype[t]=function(){return E[t].apply(E,[this].concat(s(arguments)))}},void 0),T.prototype.toSource=function(){return this.toString()},T.prototype.toString=function(){return"[object Promise]"},E.nearer=N,E.isPromise=C,E.isPromiseAlike=k,E.isPending=L,E.isFulfilled=A,E.isRejected=O;var M=E.unhandledReasons=[],_=[],D=!1;typeof 
process!="undefined"&&process.on&&process.on("exit",function(){for(var e=0;e<M.length;e++){var t=M[e];t&&typeof t.stack!="undefined"?console.warn("Unhandled rejection reason:",t.stack):console.warn("Unhandled rejection reason (no stack):",t)}}),E.reject=H,E.fulfill=B,E.resolve=j,E.master=I,E.when=q,E.spread=R,E.async=U,E["return"]=z,E.promised=W,E.dispatch=X,E.dispatcher=V,E.get=V("get"),E.set=V("set"),E["delete"]=E.del=V("delete");var $=E.post=V("post");E.send=J,E.invoke=J,E.fapply=K,E["try"]=Q,E.fcall=Q,E.fbind=G,E.keys=V("keys"),E.all=Y,E.allResolved=Z,E["catch"]=E.fail=et,E.progress=tt,E["finally"]=E.fin=nt,E.done=rt,E.timeout=it,E.delay=st,E.nfapply=ot,E.nfcall=ut,E.nfbind=at,E.denodeify=E.nfbind,E.nbind=ft,E.npost=lt,E.nsend=ct,E.ninvoke=E.nsend,E.nodeify=ht;var pt=w();return E}),define("page-loader",["Q"],function(e){var t={},n=function(e){var t=e.match(/[^\/]+/)[0],n=e.split("/").slice(1),r={};for(var i=0;i<n.length;i++){var s=n[i].split(":");r[s[0]]=s[1]}return{pagename:t,params
:r}},r=function(n){var r=e.defer();return t[n]&&t[n].object?r.resolve(t[n].object):(t[n]={isLoading:!0},require(["pages/"+n+"-page"],function(e){console.log('loaded page "'+n+'"');var i=".page-container";n==="home"&&(i="[data-page=home]");var s=document.querySelector(i);e.init(s).then(function(e){t[n].object=e,t[n].isLoading=!1,r.resolve(e)})})),r.promise},i=function(e){return t[e]&&t[e].object},s=function(e){return t[e]&&t[e].isLoading},o=function(e,n){r(e).done(function(r){for(var i in t)i!==e&&t[i].object&&t[i].object.hide();r.show(n)},function(e){console.error(e.stack)})},u=function(e,t){r(e).done(function(e){e.show(t)},function(e){console.error(e.stack)})};return{parsePath:n,load:r,isLoaded:i,isLoading:s,open:o,popup:u}}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick
.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&e.type==="file"||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1
,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(this.deviceIsIOS){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0
,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0];return Math.abs(t.pageX-this.touchStartX)>10||Math.abs(t.pageY-this.touchStartY)>10?!0:!1},FastClick.prototype.findControl=function(e){return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,r,i,s,o=this.targetElement;this.touchHasMoved(e)&&(this.trackingClick=!1,this.targetElement=null);if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint
(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)),r=o.tagName.toLowerCase();if(r==="label"){t=this.findControl(o);if(t){this.focus(o);if(this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o)){if(e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&r==="input")return this.targetElement=null,!1;this.focus(o);if(!this.deviceIsIOS4||r!=="select")this.targetElement=null,e.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){i=o.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}return this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick
.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t;if(typeof window.ontouchstart=="undefined")return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;t=document.querySelector("meta[name=viewport]");if(t&&t.content.indexOf("user-scalable=no")!==-1)return!0}return e.style.msTouchAction==="none"?!0:!1},FastClick
.attach=function(e){return new FastClick(e)},typeof define!="undefined"&&define.amd?define("fastclick",[],function(){return FastClick}):typeof module!="undefined"&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(
e,t,n,r){r.isBuild?n(null):c(n)},c}),require(["page-loader","fastclick","domReady!"],function(e,t){console.log("app loaded");var n=document.querySelector(".page-container"),r=window.getComputedStyle(n),i=parseInt(r.width.replace("px",""),10),s=parseInt(r.height.replace("px",""),10),o=n.style,u=function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=e/i,r=t/s,u=n;r<n&&(u=r);var a="scale("+u+","+u+")",f=(e-i*u)/2;f=parseInt(f*(1/u),10);var l=(t-s*u)/2;l=parseInt(l*(1/u),10);var c="translate("+f+"px, "+l+"px)";o["-webkit-transform"]=a+" "+c,o.transform=a+" "+c,o.position="absolute"};t.attach(document.body),window.onresize=u,window.addEventListener("orientationchange",u),u(),setTimeout(function(){n.style.display="block"},0),screen.lockOrientation&&screen.lockOrientation("landscape"),e.open("home")}),define("main",function(){}),function(e){function t(e,n){if(!(this instanceof t))return new t(e,n);if(e instanceof t)return e;var r=t.require("Util");typeof 
e=="string"?(this.selector=e,this.elements=this.qsa(n,e)):e instanceof Array?this.elements=r.unique(e.filter(r.isElement)):r.isNodeList(e)?this.elements=Array.prototype.slice.call(e).filter(r.isElement):r.isElement(e)?this.elements=[e]:this.elements=[],this._update()}t.version="0.1.0";var n={};t.require=function(e){return n[e]},t.define=function(e,r){n[e]=r.call(t.prototype)},e.Rye=t}(window),Rye.define("Util",function(){function i(e,n,r){if(!e)return;if(e.forEach===t)return e.forEach(n,r);if(e.length===+e.length)for(var i=0;i<e.length;i++)n.call(r||e,e[i],i,e);else{var s=Object.keys(e);for(var i=0;i<s.length;i++){var o=s[i];n.call(r||e,e[o],o,e)}}}function s(t){return i(e.call(arguments,1),function(e){i(e,function(e,n){t[n]=e})}),t}function o(e,t){function n(){this.constructor=e}return s(e,t),n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}function u(e){return e&&(e.nodeType===1||e.nodeType===9)}function a(e){return e&&b(["nodelist","htmlcollection","htmlformcontrolscollection"
],e)}function f(e){return e.filter(function(t,n){return e.indexOf(t)==n})}function l(e,t){return e.map(function(e){return e[t]})}function c(e,t,n){return e.forEach(function(r,i){e[i][t]=n})}function h(e,t){var n,r=e[0].toUpperCase()+e.substring(1),i=["moz","webkit","ms","o"];t=t||window;if(n=t[e])return n;while(h=i.shift())if(n=t[h+r])break;return n}function p(t,n,r,i,s){return typeof n=="string"&&(n=t[n]),function(){var o=e.call(arguments,0,i||Infinity);return r&&(o=s?r.concat(o):o.concat(r)),typeof t=="number"&&(t=o[t]),n.apply(t||this,o)}}function d(e,t,n,r){return p(e,t,n,r)}function v(e,t,n,r){return p(e,t,n,r,!0)}function m(t){return v(this,t,e.call(arguments,1))}function g(e){return e.rye_id||(e.rye_id=r.next())}function y(e){var t=n.call(e).match(/\s(\w+)\]$/);return t&&t[1].toLowerCase()}function b(e,t){return e.indexOf(y(t))>=0}var e=Array.prototype.slice,t=Array.prototype.forEach,n=Object.prototype.toString,r={current:0,next:function(){return++this.current}};return{each:i,extend
:s,inherits:o,isElement:u,isNodeList:a,unique:f,pluck:l,put:c,prefix:h,applyRight:d,applyLeft:v,curry:m,getUid:g,type:y,is:b}}),Rye.define("Data",function(){function n(n,r,i){var s=e.getUid(n),o=t[s]||(t[s]={});o[r]=i}function r(n,r){var i=t[e.getUid(n)];return r==null?i:i&&i[r]}var e=Rye.require("Util"),t={};return this.data=function(e,t){return t!==undefined?(this.each(function(r){n(r,e,t)}),this):this.elements.length===1?r(this.elements[0],e):this.elements.map(function(t){return r(t,e)})},{set:n,get:r}}),Rye.define("Query",function(){function s(t,n){var r,u;return!t||!e.isElement(t)||!n?!1:n.nodeType?t===n:n instanceof Rye?n.elements.some(function(e){return s(t,e)}):t===document?!1:(r=e.prefix("matchesSelector",i),r?r.call(t,n):(t.parentNode||i.appendChild(t),u=o(t.parentNode,n).indexOf(t)>=0,t.parentNode===i&&i.removeChild(t),u))}function o(i,s){var o;i=i||document,!s.match(n)||RegExp.$1==="#"&&i!==document?o=r._:(o=r[RegExp.$1],s=RegExp.$2);var u=i[o](s);return e.isNodeList(u)?t.call
(u):e.isElement(u)?[u]:[]}function u(t,n,r){do t=t[n];while(t&&(r&&!s(t,r)||!e.isElement(t)));return t}function a(e,t){return t==null?new Rye(e):(new Rye(e)).filter(t)}var e=Rye.require("Util"),t=Array.prototype.slice,n=/^([.#]?)([\w\-]+)$/,r={".":"getElementsByClassName","#":"getElementById","":"getElementsByTagName",_:"querySelectorAll"},i=document.createElement("div");return this.qsa=o,this.find=function(e){var t;return this.length===1?t=o(this.elements[0],e):t=this.elements.reduce(function(t,n){return t.concat(o(n,e))},[]),a(t)},this.filter=function(e,t){if(typeof e=="function"){var n=e;return a(this.elements.filter(function(e,r){return n.call(e,e,r)!=(t||false)}))}return e&&e[0]==="!"&&(e=e.substr(1),t=!0),a(this.elements.filter(function(n){return s(n,e)!=(t||false)}))},this.contains=function(e){var t;return a(this.elements.reduce(function(n,r){return t=o(r,e),n.concat(t.length?r:null)},[]))},this.is=function(e){return this.length>0&&this.filter(e).length>0},this.not=function(e){return this
.filter(e,!0)},this.index=function(e){return e==null?this.parent().children().indexOf(this.elements[0]):this.indexOf((new Rye(e)).elements[0])},this.add=function(e,t){var n=e;return typeof e=="string"&&(n=(new Rye(e,t)).elements),this.concat(n)},this.pluckNode=function(e){return this.map(function(t){return u(t,e)})},this.next=function(){return a(this.pluckNode("nextSibling"))},this.prev=function(){return a(this.pluckNode("previousSibling"))},this.first=function(){return a(this.get(0))},this.last=function(){return a(this.get(-1))},this.siblings=function(n){var r=[];return this.each(function(n){t.call(n.parentNode.childNodes).forEach(function(t){e.isElement(t)&&t!==n&&r.push(t)})}),a(r,n)},this.parent=function(e){return a(this.pluck("parentNode"),e)},this.parents=function(e){var t=[],n=this.elements,r=function(e){if((e=e.parentNode)&&e!==document&&t.indexOf(e)<0)return t.push(e),e};while(n.length>0&&n[0]!==undefined)n=n.map(r);return a(t,e)},this.closest=function(e){return this.map(function(
t){return s(t,e)?t:u(t,"parentNode",e)})},this.children=function(e){return a(this.elements.reduce(function(e,n){var r=t.call(n.children);return e.concat(r)},[]),e)},{matches:s,qsa:o,getClosestNode:u}}),Rye.define("Collection",function(){var e=Rye.require("Util"),t=Array.prototype.slice,n=Array.prototype.concat;this.get=function(e){return e==null?this.elements.slice():this.elements[e<0?this.elements.length+e:e]},this.eq=function(e){return e==null?new Rye:new Rye(this.get(e))},["forEach","reduce","reduceRight","indexOf"].forEach(function(e){this[e]=function(t,n,r,i){return this.elements[e](t,n,r,i)}}.bind(this)),["map","sort"].forEach(function(e){this[e]=function(t,n,r,i){return new Rye(this.elements[e](t,n,r,i))}}.bind(this)),this.each=function(e){return this.elements.forEach(e),this},this.iterate=function(e,t){return function(n,r,i,s){return this.each(function(o){e.call(t,o,n,r,i,s)})}},this.push=function(t){return e.isElement(t)?(this.elements.push(t),this._update(),this.length-1):-1},
this.slice=function(e,n){return new Rye(t.call(this.elements,e,n))},this.concat=function(){var e=t.call(arguments).map(function(e){return e instanceof Rye?e.elements:e});return new Rye(n.apply(this.elements,e))},this.pluck=function(t){return e.pluck(this.elements,t)},this.put=function(t,n){return e.put(this.elements,t,n),this},this._update=function(){this.length=this.elements.length}}),Rye.define("Manipulation",function(){function r(e){return e.multiple?(new Rye(e)).find("option").filter(function(e){return e.selected&&!e.disabled}).pluck("value"):e.value}function i(e,t){return t==="value"&&e.nodeName=="INPUT"?r(e):e.getAttribute(t)}function s(e,t){typeof t=="string"?e.insertAdjacentHTML("beforeend",t):e.appendChild(t)}function o(e,t){var n;typeof t=="string"?e.insertAdjacentHTML("afterbegin",t):(n=e.childNodes[0])?e.insertBefore(t,n):e.appendChild(t)}function u(e,n){var r;typeof n=="string"?e.insertAdjacentHTML("afterend",n):(r=t.getClosestNode(e,"nextSibling"))?e.parentNode.insertBefore
(n,r):e.parentNode.appendChild(n)}function a(e,t){typeof t=="string"?e.insertAdjacentHTML("beforebegin",t):e.parentNode.insertBefore(t,e)}function f(t,r){this[r]=function(i){if(typeof i!="string"){i instanceof Rye?i=i.elements:e.isNodeList(i)&&(i=n.call(i));if(Array.isArray(i))return/prepend|before/.test(r)&&(i=n.call(i,0).reverse()),i.forEach(this[r].bind(this))}return this.length===1?t(this.elements[0],i):this.each(function(e,n){var r=n>0?i.cloneNode(!0):i;t(e,r)}),this}}var e=Rye.require("Util"),t=Rye.require("Query"),n=Array.prototype.slice;return e.each({append:s,prepend:o,after:u,before:a},f.bind(this)),this.text=function(e){return e==null?this.elements[0]&&this.elements[0].textContent:this.each(function(t){t.textContent=e})},this.html=function(e){return e==null?this.elements[0]&&this.elements[0].innerHTML:this.each(function(t){t.innerHTML=e})},this.empty=function(){return this.put("innerHTML","")},this.clone=function(){return this.map(function(e){return e.cloneNode(!0)})},this.remove=
function(){return this.each(function(e){e.parentNode&&e.parentNode.removeChild(e)})},this.val=function(e){return e==null?this.elements[0]&&r(this.elements[0]):this.each(function(t){t.value=e})},this.attr=function(t,n){return typeof t=="object"?this.each(function(n){e.each(t,function(e,t){n.setAttribute(t,e)})}):typeof n=="undefined"?this.elements[0]&&i(this.elements[0],t):this.each(function(e){e.setAttribute(t,n)})},this.prop=function(t,n){return typeof t=="object"?this.each(function(n){e.each(t,function(e,t){n[t]=e})}):typeof n=="undefined"?this.elements[0]&&this.elements[0][t]:this.put(t,n)},Rye.create=function(e){var t=document.createElement("div"),r;return t.innerHTML=e,r=n.call(t.childNodes),r.forEach(function(e,n){t.removeChild(e)}),new Rye(r)},{getValue:r,getAttribute:i,append:s,prepend:o,after:u,before:a}}),Rye.define("Events",function(){function r(){this.events={},this.context=null}function s(t){var n=e.getUid(t);return i[n]||(i[n]=new f(t))}function o(e){var t=e.indexOf(" ");return t>0?
e.substr(0,t):e}function u(e){var t=e.indexOf(" ");return t>0?e.substr(t):""}function a(t,n){typeof t!="string"&&(t=t.type);var r=["click","mousedown","mouseup","mousemove"].indexOf(t)!=-1,i=document.createEvent(r?"MouseEvent":"Event");return n&&e.extend(i,n),i.initEvent(t,!0,!0),i}function f(e){r.call(this),this.element=e,this.proxied={}}function l(t){var n=f.prototype[t];f.prototype[t]=function(t,r){var i=this;return typeof t!="string"?e.each(t,function(e,t){n.call(i,t,e)}):n.call(i,t,r),i}}function h(e,t,n,r){s(t)[e](n,r)}var e=Rye.require("Util"),t=Rye.require("Query"),n=Array.prototype.slice;r.prototype.addListener=function(e,t){var n=this.events[e]||(this.events[e]=[]);return n.push(t),this},r.prototype.once=function(e,t){function r(){t.apply(this,arguments),n.removeListener(e,r)}var n=this;return this.addListener(e,r)},r.prototype.removeListener=function(t,n){var r=this,i=this.events[t];return t==="*"?n?e.each(this.events,function(e,t){r.removeListener(t,n)}):this.events={}:n&&i?
(i.splice(i.indexOf(n),1),i.length===0&&delete this.events[t]):delete this.events[t],this},r.prototype.emit=function(e,t,r,i){var s=this.events[e],o=this.context||this;if(s){var s=s.slice(0),u=s.length,a=-1;switch(arguments.length){case 2:while(++a<u)s[a].call(o,t);break;case 1:while(++a<u)s[a].call(o);break;case 3:while(++a<u)s[a].call(o,t,r);break;case 4:while(++a<u)s[a].call(o,t,r,i);break;default:var f=n.call(arguments,1);while(++a<u)s[a].apply(o,f)}}return this},r.prototype.proxy=function(t){return e.applyLeft(this,this.emit,[t])};var i={};e.inherits(f,r),f.prototype._proxy=function(e){return function(n){var r=u(e),i=this.element;if(r){i=n.target;while(i&&!t.matches(i,r))i=i!==this.element&&i.parentNode;if(!i||i==this.element)return}this.context=i,this.emit(e,n,this.element)}.bind(this)},f.prototype.proxy=function(e){return this.proxied[e]||(this.proxied[e]=this._proxy(e))},f.prototype.addListener=function(e,t){return r.prototype.addListener.call(this,e,t),this.proxied[e]||this.element
.addEventListener(o(e),this.proxy(e),!1),this},f.prototype.removeListener=function(t,n){if(t.indexOf("*")>=0){var i=this,s=new RegExp("^"+t.replace("*","\\b"));e.each(this.events,function(e,t){s.test(t)&&i.removeListener(t,n)})}else{var u=this.proxied[t];r.prototype.removeListener.call(this,t,n),!this.events[t]&&u&&(this.element.removeEventListener(o(t),u,!1),delete this.proxied[t])}return this},["addListener","once","removeListener"].forEach(l),f.prototype.destroy=function(){return this.removeListener("*")},f.prototype.trigger=function(e,t){return e instanceof window.Event||(e=a(e)),e.data=t,this.element.dispatchEvent(e),this};var c={};["addListener","removeListener","once","trigger"].forEach(function(t){var n=e.curry(h,t);c[t]=n,this[t]=this.iterate(n)}.bind(this)),[r.prototype,f.prototype,this].forEach(function(e){e.on=e.addListener});var p=new r;return Rye.subscribe=p.addListener.bind(p),Rye.unsubscribe=p.removeListener.bind(p),Rye.publish=p.emit.bind(p),{EventEmitter:r,DOMEventEmitter
:f,getEmitter:s,createEvent:a,addListener:c.addListener,once:c.once,removeListener:c.removeListener,trigger:c.trigger}}),Rye.define("Style",function(){function r(e,t){return e.style.getPropertyValue(t)||window.getComputedStyle(e,null).getPropertyValue(t)}function i(e,t,r){typeof r=="number"&&n.indexOf(t)===-1&&(r+="px");var i=r===null||r===""?"remove":"set";return e.style[i+"Property"](t,""+r),e}function s(e,t){return t=t.trim(),e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")!==-1}function o(e,t){if(e.classList)t.replace(/\S+/g,function(t){e.classList.add(t)});else{var n=" "+e.className+" ",r;t=t.trim().split(/\s+/);while(r=t.shift())n.indexOf(" "+r+" ")===-1&&(n+=r+" ");e.className=n.trim()}return e}function u(e,t){if(t==="*")e.className="";else{if(t instanceof RegExp)t=[t];else{if(e.classList&&t.indexOf("*")===-1){t.replace(/\S+/g,function(t){e.classList.remove(t)});return}t=t.trim().split(/\s+/)}var n=" "+e.className+" ",r;while(r=t.shift()){r.indexOf&&r.
indexOf("*")!==-1&&(r=new RegExp("\\s*\\b"+r.replace("*","\\S*")+"\\b\\s*","g"));if(r instanceof RegExp)n=n.replace(r," ");else while(n.indexOf(" "+r+" ")!==-1)n=n.replace(" "+r+" "," ")}e.className=n.trim()}return e}var e=Rye.require("Util"),t=Rye.require("Data"),n="fill-opacity font-weight line-height opacity orphans widows z-index zoom".split(" ");return this.show=this.iterate(function(e){i(e,"display",t.get(e,"_display")||"block")}),this.hide=this.iterate(function(e){var n=r(e,"display");n!=="none"&&t.set(e,"_display",n),i(e,"display","none")}),this.css=function(t,n){return n==null?typeof t=="string"?this.elements[0]&&r(this.elements[0],t):this.each(function(n){e.each(t,function(e,t){i(n,t,e)})}):this.each(function(e){i(e,t,n)})},this.hasClass=function(e){var t=!1;return this.each(function(n){t=t||s(n,e)}),!!t},this.addClass=this.iterate(o),this.removeClass=this.iterate(u),this.toggleClass=this.iterate(function(e,t,n){n==null&&(n=!s(e,t)),(n?o:u)(e,t)}),{getCSS:r,setCSS:i,hasClass:s
,addClass:o,removeClass:u}}),define("rye",function(e){return function(){var t,n;return t||e.Rye}}(this));var dust={};(function(dust){function Context(e,t,n){this.stack=e,this.global=t,this.blocks=n}function Stack(e,t,n,r){this.tail=t,this.isObject=!dust.isArray(e)&&e&&typeof e=="object",this.head=e,this.index=n,this.of=r}function Stub(e){this.head=new Chunk(this),this.callback=e,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(e,t,n){this.root=e,this.next=t,this.data=[],this.flushable=!1,this.taps=n}function Tap(e,t){this.head=e,this.tail=t}dust.helpers={},dust.cache={},dust.register=function(e,t){if(!e)return;dust.cache[e]=t},dust.render=function(e,t,n){var r=(new Stub(n)).head;dust.load(e,r,Context.wrap(t)).end()},dust.stream=function(e,t){var n=new Stream;return dust.nextTick(function(){dust.load(e,n.head,Context.wrap(t)).end()}),n},dust.renderSource=function(e,t,n){return dust.compileFn(e)(t,n)},dust.compileFn=function(e,t){var n=dust.loadSource(dust.compile(e,
t));return function(e,t){var r=t?new Stub(t):new Stream;return dust.nextTick(function(){n(r.head,Context.wrap(e)).end()}),r}},dust.load=function(e,t,n){var r=dust.cache[e];return r?r(t,n):dust.onLoad?t.map(function(t){dust.onLoad(e,function(r,i){if(r)return t.setError(r);dust.cache[e]||dust.loadSource(dust.compile(i,e)),dust.cache[e](t,n).end()})}):t.setError(new Error("Template Not Found: "+e))},dust.loadSource=function(source,path){return eval(source)},Array.isArray?dust.isArray=Array.isArray:dust.isArray=function(e){return Object.prototype.toString.call(e)=="[object Array]"},dust.nextTick=function(){return typeof process!="undefined"?process.nextTick:function(e){setTimeout(e,0)}}(),dust.isEmpty=function(e){return dust.isArray(e)&&!e.length?!0:e===0?!1:!e},dust.filter=function(e,t,n){if(n)for(var r=0,i=n.length;r<i;r++){var s=n[r];s==="s"?t=null:typeof dust.filters[s]=="function"&&(e=dust.filters[s](e))}return t&&(e=dust.filters[t](e)),e},dust.filters={h:function(e){return dust.escapeHtml
(e)},j:function(e){return dust.escapeJs(e)},u:encodeURI,uc:encodeURIComponent,js:function(e){return JSON?JSON.stringify(e):e},jp:function(e){return JSON?JSON.parse(e):e}},dust.makeBase=function(e){return new Context(new Stack,e)},Context.wrap=function(e){return e instanceof Context?e:new Context(new Stack(e))},Context.prototype.get=function(e){var t=this.stack,n;while(t){if(t.isObject){n=t.head[e];if(n!==undefined)return n}t=t.tail}return this.global?this.global[e]:undefined},Context.prototype.getPath=function(e,t){var n=this.stack,r=t.length;if(e&&r===0)return n.head;n=n.head;var i=0;while(n&&i<r)n=n[t[i]],i++;return n},Context.prototype.push=function(e,t,n){return new Context(new Stack(e,this.stack,t,n),this.global,this.blocks)},Context.prototype.rebase=function(e){return new Context(new Stack(e),this.global,this.blocks)},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(e,t,n){typeof e=="function"&&(e=e(t,n).data.join(""),t.data=[]);var r=
this.blocks;if(!r)return;var i=r.length,s;while(i--){s=r[i][e];if(s)return s}},Context.prototype.shiftBlocks=function(e){var t=this.blocks,n;return e?(t?n=t.concat([e]):n=[e],new Context(this.stack,this.global,n)):this},Stub.prototype.flush=function(){var e=this.head;while(e){if(!e.flushable){if(e.error){this.callback(e.error),this.flush=function(){};return}return}this.out+=e.data.join(""),e=e.next,this.head=e}this.callback(null,this.out)},Stream.prototype.flush=function(){var e=this.head;while(e){if(!e.flushable){if(e.error){this.emit("error",e.error),this.flush=function(){};return}return}this.emit("data",e.data.join("")),e=e.next,this.head=e}this.emit("end")},Stream.prototype.emit=function(e,t){if(!this.events)return!1;var n=this.events[e];if(!n)return!1;if(typeof n=="function")n(t);else{var r=n.slice(0);for(var i=0,s=r.length;i<s;i++)r[i](t)}},Stream.prototype.on=function(e,t){return this.events||(this.events={}),this.events[e]?typeof this.events[e]=="function"?this.events[e]=[this.events
[e],t]:this.events[e].push(t):this.events[e]=t,this},Stream.prototype.pipe=function(e){return this.on("data",function(t){e.write(t,"utf8")}).on("end",function(){e.end()}).on("error",function(t){e.error(t)}),this},Chunk.prototype.write=function(e){var t=this.taps;return t&&(e=t.go(e)),this.data.push(e),this},Chunk.prototype.end=function(e){return e&&this.write(e),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(e){var t=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,t,this.taps);return this.next=n,this.flushable=!0,e(n),t},Chunk.prototype.tap=function(e){var t=this.taps;return t?this.taps=t.push(e):this.taps=new Tap(e),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(e,t){return e(this,t)},Chunk.prototype.reference=function(e,t,n,r){if(typeof e=="function"){e.isFunction=!0,e=e.apply(t.current(),[this,t,null,{auto:n,filters:r}]);if(e instanceof Chunk)return e}return dust.isEmpty(e)?this:this.
write(dust.filter(e,n,r))},Chunk.prototype.section=function(e,t,n,r){if(typeof e=="function"){e=e.apply(t.current(),[this,t,n,r]);if(e instanceof Chunk)return e}var i=n.block,s=n["else"];r&&(t=t.push(r));if(dust.isArray(e)){if(i){var o=e.length,u=this;if(o>0){t.stack.head&&(t.stack.head.$len=o);for(var a=0;a<o;a++)t.stack.head&&(t.stack.head.$idx=a),u=i(u,t.push(e[a],a,o));return t.stack.head&&(t.stack.head.$idx=undefined,t.stack.head.$len=undefined),u}if(s)return s(this,t)}}else if(e===!0){if(i)return i(this,t)}else if(e||e===0){if(i)return i(this,t.push(e))}else if(s)return s(this,t);return this},Chunk.prototype.exists=function(e,t,n){var r=n.block,i=n["else"];if(!dust.isEmpty(e)){if(r)return r(this,t)}else if(i)return i(this,t);return this},Chunk.prototype.notexists=function(e,t,n){var r=n.block,i=n["else"];if(dust.isEmpty(e)){if(r)return r(this,t)}else if(i)return i(this,t);return this},Chunk.prototype.block=function(e,t,n){var r=n.block;return e&&(r=e),r?r(this,t):this},Chunk.prototype
.partial=function(e,t,n){var r;return n?(r=dust.makeBase(t.global),r.blocks=t.blocks,t.stack&&t.stack.tail&&(r.stack=t.stack.tail),r=r.push(n),r=r.push(t.stack.head)):r=t,typeof e=="function"?this.capture(e,r,function(e,t){dust.load(e,t,r).end()}):dust.load(e,this,r)},Chunk.prototype.helper=function(e,t,n,r){return dust.helpers[e]?dust.helpers[e](this,t,n,r):this},Chunk.prototype.capture=function(e,t,n){return this.map(function(r){var i=new Stub(function(e,t){e?r.setError(e):n(t,r)});e(i.head,t).end()})},Chunk.prototype.setError=function(e){return this.error=e,this.root.flush(),this},Tap.prototype.push=function(e){return new Tap(e,this)},Tap.prototype.go=function(e){var t=this;while(t)e=t.head(e),t=t.tail;return e};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(e){return typeof e=="string"?HCHARS.test(e)?e.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):e:e};var BS=/\\/g
,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(e){return typeof e=="string"?e.replace(BS,"\\\\").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):e}})(dust),typeof exports!="undefined"&&(typeof process!="undefined"&&require("./server")(dust),module.exports=dust),define("dust",function(e){return function(){var t,n;return t||e.dust}}(this)),define("dust-render",["dust","Q"],function(e,t){var n=function(e){var t=new Date(e),n=t.getMinutes(),r=t.getSeconds();return n<10&&(n="0"+n),r<10&&(r="0"+r),""+n+":"+r};return function(r,i){var s=t.defer();i=i||{};var o=function(e){e.filters.dateFilter||(e.filters.dateFilter=n),e.render(r,i,function(e,t){e?s.reject(e):s.resolve(t)})};if(!e.cache.hasOwnProperty(r)){var u="../templates/"+r+".dust";require(["text!"+u,"dust-full"],function(e,t){var n=t.compile(e,r);t.loadSource(n),o(t)})}else o(e);return s
.promise}}),function(e){function Y(e){return e instanceof Y?e:new st(e)}function et(e){return e.charCodeAt(0)}function tt(e,t){var n=e.index,r=t.index;e=e.criteria,t=t.criteria;if(e!==t){if(e>t||typeof e=="undefined")return 1;if(e<t||typeof t=="undefined")return-1}return n<r?-1:1}function nt(e,t,n,r){function a(){var r=arguments,f=s?this:t;i||(e=t[o]),n.length&&(r=r.length?(r=q.call(r),u?r.concat(n):n.concat(r)):n);if(this instanceof a){ot.prototype=e.prototype,f=new ot,ot.prototype=null;var l=e.apply(f,r);return At(l)?l:f}return e.apply(f,r)}var i=Lt(e),s=!n,o=t;if(s){var u=r;n=t}else if(!i){if(!r)throw new TypeError;t=e}return a}function rt(e){return"\\"+L[e]}function it(e){return ht[e]}function st(e){this.__wrapped__=e}function ot(){}function ut(e){return pt[e]}function at(e){return R.call(e)==y}function dt(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var i in r)e[i]=r[i]}return e}function vt(e){return At(e)?ft(e)?q.call(e):dt({},e):e}function mt
(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var i in r)e[i]==null&&(e[i]=r[i])}return e}function bt(e){var t=[];return gt(e,function(e,n){Lt(e)&&t.push(n)}),t.sort()}function wt(e,t){return e?j.call(e,t):!1}function Et(e){var t=-1,n=ct(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function St(e){return e===!0||e===!1||R.call(e)==w}function xt(e){return e instanceof Date||R.call(e)==E}function Tt(e){return e?e.nodeType===1:!1}function Nt(e){if(!e)return!0;if(ft(e)||Pt(e))return!e.length;for(var t in e)if(j.call(e,t))return!1;return!0}function Ct(e,t,n,r){if(e===t)return e!==0||1/e==1/t;var i=typeof e,s=typeof t;if(e===e&&(!e||i!="function"&&i!="object")&&(!t||s!="function"&&s!="object"))return!1;if(e==null||t==null)return e===t;var u=R.call(e),a=R.call(t);if(u!=a)return!1;switch(u){case w:case E:return+e==+t;case x:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case N:case C:return e==String(t)}var f=u==b;if(!f){if(e instanceof Y||t instanceof 
Y)return Ct(e.__wrapped__||e,t.__wrapped__||t,n,r);if(u!=T)return!1;var l=e.constructor,c=t.constructor;if(l!=c&&!(Lt(l)&&l instanceof l&&Lt(c)&&c instanceof c))return!1}n||(n=[]),r||(r=[]);var h=n.length;while(h--)if(n[h]==e)return r[h]==t;var p=!0,d=0;n.push(e),r.push(t);if(f){d=t.length,p=d==e.length;if(p)while(d--)if(!(p=Ct(e[d],t[d],n,r)))break;return p}return gt(t,function(t,i,s){if(j.call(s,i))return d++,!(p=j.call(e,i)&&Ct(e[i],t,n,r))&&o}),p&&gt(e,function(e,t,n){if(j.call(n,t))return!(p=--d>-1)&&o}),p}function kt(e){return W(e)&&!X(parseFloat(e))}function Lt(e){return typeof e=="function"}function At(e){return e?k[typeof e]:!1}function Ot(e){return _t(e)&&e!=+e}function Mt(e){return e===null}function _t(e){return typeof e=="number"||R.call(e)==x}function Dt(e){return e instanceof RegExp||R.call(e)==N}function Pt(e){return typeof e=="string"||R.call(e)==C}function Ht(e){return typeof e=="undefined"}function Bt(e){var t=H.apply(A,arguments),n={};return gt(e,function(e,r){pn(t,r,1
)<0&&(n[r]=e)}),n}function jt(e){var t=-1,n=ct(e),r=n.length,i=Array(r);while(++t<r){var s=n[t];i[t]=[s,e[s]]}return i}function Ft(e){var t=0,n=H.apply(A,arguments),r=n.length,i={};while(++t<r){var s=n[t];s in e&&(i[s]=e[s])}return i}function It(e){var t=-1,n=ct(e),r=n.length,i=Array(r);while(++t<r)i[t]=e[n[t]];return i}function qt(e,t){var n=e?e.length:0,r=!1;return typeof n=="number"?r=pn(e,t)>-1:yt(e,function(e){return(r=e===t)&&o}),r}function Rt(e,t,n){var r={};return t=On(t,n),Vt(e,function(e,n,i){n=String(t(e,n,i)),j.call(r,n)?r[n]++:r[n]=1}),r}function Ut(e,t,n){var r=!0;t=On(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s)if(!(r=!!t(e[i],i,e)))break}else yt(e,function(e,n,i){return!(r=!!t(e,n,i))&&o});return r}function zt(e,t,n){var r=[];t=On(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number")while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}else yt(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Wt(e,t,n){t=On(t,n);var r=-1,i=e?e.length:0;if(typeof i!="number"
){var u;return yt(e,function(e,n,r){if(t(e,n,r))return u=e,o}),u}while(++r<i){var s=e[r];if(t(s,r,e))return s}}function Xt(e,t){return an(e,t,!0)}function Vt(e,t,n){var r=-1,i=e?e.length:0;t=t&&typeof n=="undefined"?t:On(t,n);if(typeof i=="number"){while(++r<i)if(t(e[r],r,e)===o)break}else yt(e,t)}function $t(e,t,n){var r={};return t=On(t,n),Vt(e,function(e,n,i){n=String(t(e,n,i)),(j.call(r,n)?r[n]:r[n]=[]).push(e)}),r}function Jt(e,t){var n=q.call(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Array(typeof s=="number"?s:0);return Vt(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o}function Kt(e,t,n){var r=-1,i=e?e.length:0;t=On(t,n);if(typeof i=="number"){var s=Array(i);while(++r<i)s[r]=t(e[r],r,e)}else s=[],yt(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function Qt(e,t,n){var r=-Infinity,i=r,s=-1,o=e?e.length:0;if(!t&&typeof o=="number")while(++s<o){var u=e[s];u>i&&(i=u)}else t=On(t,n),Vt(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function Gt(e,t,n){var r=Infinity
,i=r,s=-1,o=e?e.length:0;if(!t&&typeof o=="number")while(++s<o){var u=e[s];u<i&&(i=u)}else t=On(t,n),Vt(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function Yt(e,t){var n=-1,r=e?e.length:0;if(typeof r=="number"){var i=Array(r);while(++n<r)i[n]=e[n][t]}return i||Kt(e,t)}function Zt(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=On(t,r,4);var s=-1,o=e.length;if(typeof o=="number"){i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else yt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function en(e,t,n,r){var i=e,s=e?e.length:0,o=arguments.length<3;if(typeof s!="number"){var u=ct(e);s=u.length}return t=On(t,r,4),Vt(e,function(e,r,a){r=u?u[--s]:--s,n=o?(o=!1,i[r]):t(n,i[r],r,a)}),n}function tn(e,t,n){return t=On(t,n),zt(e,function(e,n,r){return!t(e,n,r)})}function nn(e){var t=-1,n=e?e.length:0,r=Array(typeof n=="number"?n:0);return Vt(e,function(e){var n=B(K()*(++t+1));r[t]=r[n],r[n]=e}),r}function rn(e){var t=e?e.length:0;return typeof t=="number"?t:ct(e).length}function sn
(e,t,n){var r;t=On(t,n);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s)if(r=t(e[i],i,e))break}else yt(e,function(e,n,i){return(r=t(e,n,i))&&o});return!!r}function on(e,t,n){var r=-1,i=e?e.length:0,s=Array(typeof i=="number"?i:0);t=On(t,n),Vt(e,function(e,n,i){s[++r]={criteria:t(e,n,i),index:r,value:e}}),i=s.length,s.sort(tt);while(i--)s[i]=s[i].value;return s}function un(e){return ft(e)?q.call(e):e&&typeof e.length=="number"?Kt(e):It(e)}function an(e,t,n){return n&&Nt(t)?null:(n?Wt:zt)(e,t)}function fn(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function ln(e){var t=-1,n=e.length,r=H.apply(A,arguments),i=[];while(++t<n){var s=e[t];pn(r,s,n)<0&&i.push(s)}return i}function cn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=-1;t=On(t,n);while(++s<i&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[0]}return q.call(e,0,J($(0,r),i))}}function hn(e,t){var n=-1,r=e?e.length:0,i=[];while(++n<r){var s=e[n];ft(s)?F.apply(i,t?s:hn(
s)):i.push(s)}return i}function pn(e,t,n){var r=-1,i=e?e.length:0;if(typeof n=="number")r=(n<0?$(0,i+n):n||0)-1;else if(n)return r=wn(e,t),e[r]===t?r:-1;while(++r<i)if(e[r]===t)return r;return-1}function dn(e,t,n){if(!e)return[];var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=On(t,n);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return q.call(e,0,J($(0,i-r),i))}function vn(e){var t=arguments,n=t.length,r=-1,i=e?e.length:0,s=[];e:while(++r<i){var o=e[r];if(pn(s,o)<0){var u=n;while(--u)if(pn(t[u],o)<0)continue e;s.push(o)}}return s}function mn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=On(t,n);while(s--&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[i-1]}return q.call(e,$(0,i-r))}}function gn(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?$(0,r+n):J(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function yn(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,i=$(0,D((t-e)/n)),s=Array(i);while(++r<i)s[r]=e,e+=n;return s}function bn
(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=On(t,n);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:$(0,t);return q.call(e,r)}function wn(e,t,n,r){var i=0,s=e?e.length:i;n=n?On(n,r,1):qn,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function En(){return Sn(H.apply(A,arguments))}function Sn(e,t,n,r){var i=-1,s=e?e.length:0,o=[],u=o;typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1),n!=null&&(u=[],n=On(n,r));while(++i<s){var a=e[i],f=n?n(a,i,e):a;if(t?!i||u[u.length-1]!==f:pn(u,f)<0)n&&u.push(f),o.push(a)}return o}function xn(e){var t=-1,n=e.length,r=[];while(++t<n){var i=e[t];pn(arguments,i,1)<0&&r.push(i)}return r}function Tn(e){var t=-1,n=e?Qt(Yt(arguments,"length")):0,r=Array(n);while(++t<n)r[t]=Yt(arguments,t);return r}function Nn(e,t){var n=-1,r=e?e.length:0,i={};while(++n<r){var s=e[n];t?i[s]=t[n]:i[s[0]]=s[1]}return i}function Cn(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function kn(e,t){return Z.fastBind||U&&arguments
.length>2?U.call.apply(U,arguments):nt(e,t,q.call(arguments,2))}function Ln(e){var t=H.apply(A,arguments),n=t.length>1?0:(t=bt(e),-1),r=t.length;while(++n<r){var i=t[n];e[i]=kn(e[i],e)}return e}function An(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function On(e,t,n){if(e==null)return qn;var r=typeof e;if(r!="function"){if(r!="object")return function(t){return t[e]};var i=ct(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=t[i[n]]===e[i[n]]))break;return r}}return typeof t!="undefined"?n===1?function(n){return e.call(t,n)}:n===2?function(n,r){return e.call(t,n,r)}:n===4?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}:e}function Mn(e,t,n){function u(){o=null,n||(i=e.apply(s,r))}var r,i,s,o;return function(){var a=n&&!o;return r=arguments,s=this,P(o),o=I(u,t),a&&(i=e.apply(s,r)),i}}function _n(e){var n=q.call(arguments,1);return I(function(){e.apply(t,n)},1)}function Dn(e,n){var r=
q.call(arguments,2);return I(function(){e.apply(t,r)},n)}function Pn(e,t){var n={};return function(){var r=String(t?t.apply(this,arguments):arguments[0]);return j.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function Hn(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Bn(e){return nt(e,q.call(arguments,1))}function jn(e,t){function u(){o=new Date,s=null,r=e.apply(i,n)}var n,r,i,s,o=0;return function(){var a=new Date,f=t-(a-o);return n=arguments,i=this,f<=0?(P(s),s=null,o=a,r=e.apply(i,n)):s||(s=I(u,f)),r}}function Fn(e,t){return function(){var n=[e];return F.apply(n,arguments),t.apply(this,n)}}function In(e){return e==null?"":String(e).replace(v,it)}function qn(e){return e}function Rn(e){Vt(bt(e),function(t){var n=Y[t]=e[t];Y.prototype[t]=function(){var e=[this.__wrapped__];F.apply(e,arguments);var t=n.apply(Y,e);return this.__chain__&&(t=new st(t),t.__chain__=!0),t}})}function Un(){return e._=M,this}function zn(e,t){return e==null&&t==null&&(t=1
),e=+e||0,t==null&&(t=e,e=0),e+B(K()*((+t||0)-e+1))}function Wn(e,t){var n=e?e[t]:null;return Lt(n)?e[t]():n}function Xn(e,t,n){e||(e=""),n=mt({},n,Y.templateSettings);var r=0,i="__p += '",s=n.variable,o=RegExp((n.escape||d).source+"|"+(n.interpolate||d).source+"|"+(n.evaluate||d).source+"|$","g");e.replace(o,function(t,n,s,o,u){return i+=e.slice(r,u).replace(m,rt),n&&(i+="' +\n_.escape("+n+") +\n'"),o&&(i+="';\n"+o+";\n__p += '"),s&&(i+="' +\n((__t = ("+s+")) == null ? '' : __t) +\n'"),r=u+t.length,t}),i+="';\n",s||(s="obj",i="with ("+s+" || {}) {\n"+i+"\n}\n"),i="function("+s+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+i+"return __p\n}";try{var u=Function("_","return "+i)(Y)}catch(a){throw a.source=i,a}return t?u(t):(u.source=i,u)}function Vn(e,t,n){var r=-1,i=Array(e>-1?e:0);while(++r<e)i[r]=t.call(n,r);return i}function $n(e){return e==null?"":String(e).replace(l,ut)}function Jn(e){var t=++s+"";return e?e+t:t}function Kn
(e){return e=new st(e),e.__chain__=!0,e}function Qn(e,t){return t(e),e}function Gn(){return this.__chain__=!0,this}function Yn(){return String(this.__wrapped__)}function Zn(){return this.__wrapped__}var t,n=typeof exports=="object"&&exports,r=typeof module=="object"&&module&&module.exports==n&&module,i=typeof global=="object"&&global;i.global===i&&(e=i);var s=0,o={},u=/\b__p \+= '';/g,a=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,l=/&(?:amp|lt|gt|quot|#39);/g,c=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,h=/\w*$/,p=/<%=([\s\S]+?)%>/g,d=/($^)/,v=/[&<>"']/g,m=/['\n\r\t\u2028\u2029\\]/g,g=0,y="[object Arguments]",b="[object Array]",w="[object Boolean]",E="[object Date]",S="[object Function]",x="[object Number]",T="[object Object]",N="[object RegExp]",C="[object String]",k={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},L={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},A=Array(),O=Object(),M=e._,_=RegExp("^"+String(O.valueOf).replace
(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),D=Math.ceil,P=e.clearTimeout,H=A.concat,B=Math.floor,j=O.hasOwnProperty,F=A.push,I=e.setTimeout,q=A.slice,R=O.toString,U=_.test(U=q.bind)&&U,z=_.test(z=Array.isArray)&&z,W=e.isFinite,X=e.isNaN,V=_.test(V=Object.keys)&&V,$=Math.max,J=Math.min,K=Math.random,Q=_.test(e.attachEvent),G=U&&!/\n|true/.test(U+Q),Z={};(function(){var e={0:1,length:1};Z.argsObject=arguments.constructor==Object,Z.fastBind=U&&!G,Z.spliceObjects=(A.splice.call(e,0,1),!e[0])})(1),Y.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:p,variable:""},st.prototype=Y.prototype,at(arguments)||(at=function(e){return e?j.call(e,"callee"):!1});var ft=z||function(e){return Z.argsObject&&e instanceof Array||R.call(e)==b},lt=function(e){var t,n=e,r=[];if(!n)return r;if(!k[typeof e])return r;for(t in n)j.call(n,t)&&r.push(t);return r},ct=V?function(e){return At(e)?V(e):[]}:lt,ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'"
:"&#39;"},pt=Et(ht),gt=function(e,t){var n,r=e,i=r;if(!r)return i;if(!k[typeof r])return i;for(n in r)if(t(r[n],n,e)===o)return i;return i},yt=function(e,t){var n,r=e,i=r;if(!r)return i;if(!k[typeof r])return i;for(n in r)if(j.call(r,n)&&t(r[n],n,e)===o)return i;return i};Lt(/x/)&&(Lt=function(e){return e instanceof Function||R.call(e)==S}),Y.after=Cn,Y.bind=kn,Y.bindAll=Ln,Y.compact=fn,Y.compose=An,Y.countBy=Rt,Y.debounce=Mn,Y.defaults=mt,Y.defer=_n,Y.delay=Dn,Y.difference=ln,Y.filter=zt,Y.flatten=hn,Y.forEach=Vt,Y.functions=bt,Y.groupBy=$t,Y.initial=dn,Y.intersection=vn,Y.invert=Et,Y.invoke=Jt,Y.keys=ct,Y.map=Kt,Y.max=Qt,Y.memoize=Pn,Y.min=Gt,Y.omit=Bt,Y.once=Hn,Y.pairs=jt,Y.partial=Bn,Y.pick=Ft,Y.pluck=Yt,Y.range=yn,Y.reject=tn,Y.rest=bn,Y.shuffle=nn,Y.sortBy=on,Y.tap=Qn,Y.throttle=jn,Y.times=Vn,Y.toArray=un,Y.union=En,Y.uniq=Sn,Y.values=It,Y.where=an,Y.without=xn,Y.wrap=Fn,Y.zip=Tn,Y.collect=Kt,Y.drop=bn,Y.each=Vt,Y.extend=dt,Y.methods=bt,Y.object=Nn,Y.select=zt,Y.tail=bn,Y.unique=Sn
,Y.clone=vt,Y.contains=qt,Y.escape=In,Y.every=Ut,Y.find=Wt,Y.findWhere=Xt,Y.has=wt,Y.identity=qn,Y.indexOf=pn,Y.isArguments=at,Y.isArray=ft,Y.isBoolean=St,Y.isDate=xt,Y.isElement=Tt,Y.isEmpty=Nt,Y.isEqual=Ct,Y.isFinite=kt,Y.isFunction=Lt,Y.isNaN=Ot,Y.isNull=Mt,Y.isNumber=_t,Y.isObject=At,Y.isRegExp=Dt,Y.isString=Pt,Y.isUndefined=Ht,Y.lastIndexOf=gn,Y.mixin=Rn,Y.noConflict=Un,Y.random=zn,Y.reduce=Zt,Y.reduceRight=en,Y.result=Wn,Y.size=rn,Y.some=sn,Y.sortedIndex=wn,Y.template=Xn,Y.unescape=$n,Y.uniqueId=Jn,Y.all=Ut,Y.any=sn,Y.detect=Wt,Y.foldl=Zt,Y.foldr=en,Y.include=qt,Y.inject=Zt,Y.first=cn,Y.last=mn,Y.take=cn,Y.head=cn,Y.chain=Kn,Y.VERSION="1.1.1",Rn(Y),Y.prototype.chain=Gn,Y.prototype.value=Zn,Vt(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=A[e];Y.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),!Z.spliceObjects&&e.length===0&&delete e[0],this}}),Vt(["concat","join","slice"],function(e){var t=A[e];Y.prototype[e]=function(){var e=
this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new st(n),n.__chain__=!0),n}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=Y,define("lodash",[],function(){return Y})):n&&!n.nodeType?r?(r.exports=Y)._=Y:n._=Y:e._=Y}(this),define("page",["lodash","page-loader"],function(e,t){var n=function(e,n){n==="popup"?t.popup(e.pagename,e.params):t.open(e.pagename,e.params)},r=function(e,t){e.removeAttribute("disabled"),e.addEventListener("click",function(){n(t,e.getAttribute("data-nav-rel"))})},i={loadPageAndNavigate:function(e,r){var i=t.parsePath(e);r=r||"page",t.isLoaded(i.pagename)||t.isLoading(i.pagename)?n(i,r):t.load(i.pagename).then(function(){n(i,r)})},enableNavButtons:function(){var n=this.elt.get(0).querySelectorAll("[data-nav]");e.each(n,function(e){var n=t.parsePath(e.getAttribute("data-nav"));t.isLoaded(n.pagename)||t.isLoading(n.pagename)?r(e,n):t.load(n.pagename).then(function(){r(e,n)})})}};return function(t){return e.extend(t,i)}}),define
("score-display-helpers",["lodash"],function(e){var t=function(t,n){var r=[],i=[];for(var s=1;s<=n;s++){var o={position:s},u={position:s};t.time[s-1]&&e.extend(o,t.time[s-1]),t.moves[s-1]&&e.extend(u,t.moves[s-1]),r.push(o),i.push(u)}return{scoresByTime:r,scoresByMoves:i}};return{pad:t}}),function(){var e="0.7.1",t=1;if(!Object.create)var n=function(){};var r=Array.prototype.slice,i={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(e){i.eventHandlers[e.guid][e.type]||(i.eventHandlers[e.guid][e.type]=[]),i.eventHandlers[e.guid][e.type].push({guid:e.guid,handler:e.handler,scope:e.scope,type:e.type})},addEventHandler:function(e,t,n){var r={},s;typeof e=="string"?(s=n||!1,r[e]=t):(s=t||!1,r=e);for(var o in r){var u=r[o],a=o.split(" ");for(var f=0,l=a.length;f<l;f++){var c=a[f];i.addEvent.call(this,{guid:this._guid||this._.guid,handler:u,scope:s,type:c})}}},addGuid:function(e,n){if(e._guid&&!n)return;e._guid=t++,i.attributes[e._guid]={},i.eventHandlers[e._guid]={}},attr:function(
e){return i.attributes[e]},clone:function(e){return i.extend({},e)},create:function(e){return Object.create?Object.create(e):(n.prototype=e,new n)},createSubclass:function(e,t){function o(){if(!(this instanceof o))throw new Error("Please use 'new' when initializing Stapes classes");this.on&&i.addGuid(this,!0),r.apply(this,arguments)}e=e||{},t=t||!1;var n=e.superclass.prototype,r=e.hasOwnProperty("constructor")?e.constructor:function(){};t&&i.extend(n,s),o.prototype=i.create(n),o.prototype.constructor=o,i.extend(o,{extend:function(){return i.extendThis.apply(this,arguments)},parent:n,proto:function(){return i.extendThis.apply(this.prototype,arguments)},subclass:function(e){return e=e||{},e.superclass=this,i.createSubclass(e)}});for(var u in e)u!=="constructor"&&u!=="superclass"&&(o.prototype[u]=e[u]);return o},emitEvents:function(e,t,n,s){n=n||!1,s=s||this._guid;var o=r.call(i.eventHandlers[s][e]);for(var u=0,a=o.length;u<a;u++){var f=i.extend({},o[u]),l=f.scope?f.scope:this;n&&(f.type=n
),f.scope=l,f.handler.call(f.scope,t,f)}},extend:function(){var e=r.call(arguments),t=e.shift();for(var n=0,i=e.length;n<i;n++){var s=e[n];for(var o in s)t[o]=s[o]}return t},extendThis:function(){var e=r.call(arguments);return e.unshift(this),i.extend.apply(this,e)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},removeAttribute:function(e,t){t=t||!1;var n=i.trim(e).split(" ");for(var r=0,s=n.length;r<s;r++){var o=i.trim(n[r]);o&&(delete i.attr(this._guid)[o],t||(this.emit("change",o),this.emit("change:"+o),this.emit("remove",o),this.emit("remove:"+o)))}},removeEventHandler:function(e,t){var n=i.eventHandlers[this._guid];if(e&&t){n=n[e];if(!n)return;for(var r=0,s=n.length,o;r<s;r++)o=n[r].handler,o&&o===t&&(n.splice(r--,1),s--)}else e?delete n[e]:i.eventHandlers[this._guid]={}},setAttribute:function(e,t,n){n=n||!1;var r=this.has(e),s=i.attr(this._guid)[e];if(t===s)return;i.attr
(this._guid)[e]=t;if(n)return;this.emit("change",e),this.emit("change:"+e,t);var o={key:e,newValue:t,oldValue:s||null};this.emit("mutate",o),this.emit("mutate:"+e,o);var u=r?"update":"create";this.emit(u,e),this.emit(u+":"+e,t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(e){return e===null||typeof e=="undefined"?String(e):Object.prototype.toString.call(e).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(e,t,n){var r=this.get(e);i.typeOf(r)==="object"&&(r=i.clone(r));var s=t.call(this,r,e);i.setAttribute.call(this,e,s,n||!1)}},s={emit:function(e,t){t=typeof t=="undefined"?null:t;var n=e.split(" ");for(var r=0,s=n.length;r<s;r++){var o=n[r];i.eventHandlers[-1].all&&i.emitEvents.call(this,"all",t,o,-1),i.eventHandlers[-1][o]&&i.emitEvents.call(this,o,t,o,-1),typeof this._guid=="number"&&(i.eventHandlers[this._guid].all&&i.emitEvents.call(this,"all",t,o),i.eventHandlers[this._guid][o]&&i.emitEvents.call(this,o,t))}},off:function()
{i.removeEventHandler.apply(this,arguments)},on:function(){i.addEventHandler.apply(this,arguments)}};i.Module=function(){},i.Module.prototype={create:function(){throw new Error("".concat("create() on Stapes modules no longer works from 0.8.0. ","Check the docs."))},each:function(e,t){var n=i.attr(this._guid);for(var r in n){var s=n[r];e.call(t||this,s,r)}},extend:function(){return i.extendThis.apply(this,arguments)},filter:function(e){var t=[],n=i.attr(this._guid);for(var r in n)e.call(this,n[r],r)&&t.push(n[r]);return t},get:function(e){if(typeof e=="string")return this.has(e)?i.attr(this._guid)[e]:null;if(typeof e=="function"){var t=this.filter(e);return t.length?t[0]:null}},getAll:function(){return i.clone(i.attr(this._guid))},getAllAsArray:function(){var e=[],t=i.attr(this._guid);for(var n in t){var r=t[n];i.typeOf(r)==="object"&&!r.id&&(r.id=n),e.push(r)}return e},has:function(e){return typeof i.attr(this._guid)[e]!="undefined"},map:function(e,t){var n=[];return this.each(function(
r,i){n.push(e.call(t||this,r,i))},t||this),n},push:function(e,t){if(i.typeOf(e)==="array")for(var n=0,r=e.length;n<r;n++)i.setAttribute.call(this,i.makeUuid(),e[n]);else i.setAttribute.call(this,i.makeUuid(),e,t||!1);return this},remove:function(e,t){return typeof e=="function"?this.each(function(n,r){e(n)&&i.removeAttribute.call(this,r,t)}):i.removeAttribute.call(this,e,t||!1),this},set:function(e,t,n){if(typeof e=="object")for(var r in e)i.setAttribute.call(this,r,e[r]);else i.setAttribute.call(this,e,t,n||!1);return this},size:function(){var e=0,t=i.attr(this._guid);for(var n in t)e++;return e},update:function(e,t,n){return typeof e=="string"?i.updateAttribute.call(this,e,t,n||!1):typeof e=="function"&&this.each(function(t,n){i.updateAttribute.call(this,n,e)}),this}};var o={_:i,create:function(){var e=i.create(i.Module.prototype);return i.addGuid(e,!0),o.mixinEvents(e),e},extend:function(){return i.extendThis.apply(i.Module.prototype,arguments)},mixinEvents:function(e){return e=e||{}
,i.addGuid(e),i.extend(e,s)},on:function(){i.addEventHandler.apply(this,arguments)},subclass:function(e,t){return t=t||!1,e=e||{},e.superclass=t?function(){}:i.Module,i.createSubclass(e,!t)},version:e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=o),exports.Stapes=o):typeof define=="function"&&define.amd?define("stapes",[],function(){return o}):window.Stapes=o}(),define("data-widget",["lodash","stapes"],function(e,t){var n=function(n){if(typeof n.render!="function")throw new Error("Widget must be declared with render() function");if(!n.elt)throw new Error("Widget must be associated with a resultset elt");e.extend(this,n),t.mixinEvents(this)};return n.prototype.update=function(){var e=this;this.elt.empty(),this.render().then(function(t){e.elt.html(t),e.refresh&&setTimeout(function(){e.refresh()},0)})},n.prototype.watch=function(e,t){var n=this.update.bind(this);if(t)for(var r=0;r<t.length;r++)e.on(t[r],n);else e.on("update",n)},function(
e){return new n(e)}}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s+".js"))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&r(e[i],t[i],n)}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.1+",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":""
)+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("../nls/strings",{root:{choosePhoto:"Choose a photo",play:"Play",easy:"Easy",hard:"Hard",brutal:"Brutal",leaderboard:"Leaderboard",playAgain:"Play again",chooseLevel:"Choose level",moves:"Moves",time:"Time",paused:"Paused",quickStart:"Quick start",save:"Save",saved:"Saved",wellDone:"Well done!",done:"Done",yourName:"Name",highScores:"High scores",notQualifying:"Your score does not qualify",photo:"Photo"},fi:!0}),define("leaderboard-mini-widget",["score-display-helpers","dust-render","data-widget","i18n!../nls/strings"],function(e,t,n,r){return function(i,s,o,u){return n({scoresToDisplay:u,elt:i,templateName:"leaderboard-mini",game:s,leaderboard:o,includeCurrentGameInScores:!0,render:function(){var n=o.getScoresForGame(this.game,this.scoresToDisplay,this.includeCurrentGameInScores),i={scores:e.pad(n,this.scoresToDisplay),translations:r};
return t(this.templateName,i)}})}}),define("game-info-widget",["dust-render","data-widget","i18n!../nls/strings"],function(e,t,n){return function(r,i,s){var o=t({elt:r,showPhotoCredit:s,templateName:"game-info",game:i,render:function(){var t={game:this.game.getAll(),translations:n};return this.showPhotoCredit&&(t.photoCredit=i.get("photo").creator),e(this.templateName,t)}});return o}}),define("score",[],function(){var e=function(e,t,n,r,i,s){this.when=JSON.stringify(e),this.who=t,this.photoId=n,this.difficulty=r,this.moves=i,this.time=s};return function(t){return new e(t.dateRecorded||new Date,t.player,t.photoId,t.difficulty,t.moves,t.time)}}),define("score-save-widget",["stapes","score","dust-render","data-widget","i18n!../nls/strings"],function(e,t,n,r,i){return function(s,o,u){var a=r({elt:s,templateName:"score-save",game:o,leaderboard:u,score:null,refresh:function(){if(!u.isQualifyingScore(this.score))return;var e=this;e.saveButton=e.elt.find("#save-score"),e.nameEntry=e.elt.find("#name-entry"
),e.elt.find("label").on("click",function(){e.nameEntry.trigger("focus")}),e.saveButton.on("click",function(){e.conditionallyEmitSave()}),e.nameEntry.on("keypress",function(t){t.charCode===13&&e.conditionallyEmitSave()}),e.nameEntry.on("keyup",function(){var t=!e.nameEntry.get(0).hasAttribute("disabled");e.nameEntry.val()!==""&&t?e.saveButton.get(0).removeAttribute("disabled"):e.saveButton.attr("disabled","disabled")}),e.saveButton.attr("disabled","disabled").val(i.save),e.nameEntry.get(0).removeAttribute("disabled"),e.nameEntry.val("")},conditionallyEmitSave:function(){var e=this.saveButton.attr("disabled")!=="disabled"&&u.isQualifyingScore(this.score);if(!e)return;this.score.who=this.nameEntry.val(),this.emit("save",this.score),this.saveButton.attr("disabled","disabled").val(i.saved),this.nameEntry.attr("disabled","disabled")},resetScore:function(){this.score=t({player:"",photoId:o.get("photo").id,difficulty:o.get("difficulty"),moves:o.get("moves"),time:o.get("time")})},render:function(
){var e={translations:i};return this.resetScore(),u.isQualifyingScore(this.score)&&(e.qualifyingScore=!0),n(this.templateName,e)}});return e.mixinEvents(a),a}}),define("pages/../../nls/strings",{root:{choosePhoto:"Choose a photo",play:"Play",easy:"Easy",hard:"Hard",brutal:"Brutal",leaderboard:"Leaderboard",playAgain:"Play again",chooseLevel:"Choose level",moves:"Moves",time:"Time",paused:"Paused",quickStart:"Quick start",save:"Save",saved:"Saved",wellDone:"Well done!",done:"Done",yourName:"Name",highScores:"High scores",notQualifying:"Your score does not qualify",photo:"Photo"},fi:!0}),define("game",["stapes","lodash"],function(e,t){var n=function(e,t){this.row=t,this.column=e,this.targetColumn=e,this.targetRow=t},r=e.subclass({constructor:function(e){var t=this;this.difficulties=e.difficulties,this.photoCollection=e.photoCollection;var n=e.startingDifficulty,r=e.startingPhoto;this.on("change:difficulty",function(e){var n=this.difficulties[e].tilesPerSide;t.set("rows",n),t.set("columns"
,n);var r=this.difficulties[e].shuffles;t.set("shuffles",r)}),this.setDifficulty(n),this.set("photo",r),this.reset()},resetTiles:function(){var e=[],t=this.get("rows")||1,r=this.get("columns")||1;for(var i=1;i<=t;i++)for(var s=1;s<=r;s++)e.push(new n(s,i));var o=Math.floor(Math.random()*e.length),u=e[o];this.set("emptyPosition",{row:u.row,column:u.column}),e=e.slice(0,o).concat(e.slice(o+1)),this.set("tiles",e)},getAdjacentTiles:function(e,t){var n=this.get("tiles"),r=[],i,s,o,u,a,f,l;for(var c=0;c<n.length;c+=1)i=n[c],s=i.column,o=i.row,u=s===e,a=o===t,f=o===t-1||o===t+1,l=s===e-1||s===e+1,(u&&f||a&&l)&&r.push(i);return r},shuffle:function(){var e=this.get("shuffles"),n=this.get("emptyPosition"),r,i,s=null,o,u,a,f=function(e){return e===s};for(var l=0;l<e;l+=1)r=n.row,i=n.column,o=this.getAdjacentTiles(i,r),o=t.reject(o,f),u=Math.floor(o.length*Math.random()),a=o[u],n.row=a.row,n.column=a.column,a.row=r,a.column=i,s=a;this.set("emptyPosition",n)},checkCompleted:function(){if(this.get("completed"
))return!1;var e=!0,t=this.get("tiles");for(var n=0;n<t.length;n++)if(t[n].targetColumn!==t[n].column||t[n].targetRow!==t[n].row){e=!1;break}return this.set("completed",e),e&&this.emit("completed"),e},reset:function(){this.resetTiles(),this.shuffle(),this.set("time",0),this.set("moves",0),this.set("completed",!1),this.set("player",""),this.start(),this.emit("reset")},setDifficulty:function(e){if(!t.include(t.keys(this.difficulties),e))throw new Error('cannot set game difficulty to "'+e+'"');this.set("difficulty",e)},setPhotoById:function(e){var t=this.photoCollection.get(e);if(!t)throw new Error("cannot set photo for game by ID "+e);this.get("photo").id!==e&&this.set("photo",t)},getPhotoById:function(e){return this.photoCollection.get(e)},incrementMoves:function(){this.set("moves",this.get("moves")+1)},pause:function(){var e=this.get("lastStarted");if(e){var t=(new Date).getTime()-e;this.set("time",this.get("time")+t)}},start:function(){this.set("lastStarted",(new Date).getTime())}});return function(
e){return new r(e)}}),define("leaderboard",["stapes","lodash","score"],function(e,t,n){var r=function(e,n,r){var i=t.sortBy(e,n);return i=i.slice(0,r),i},i=e.subclass({defaultKey:"slider-puzzle-ng-leaderboard",defaultScoresToKeep:6,constructor:function(e){e=e||{};var t=e.useLocalStorage===!1?!1:!0,n=e.scoresToKeep||this.defaultScoresToKeep,r=e.difficultyLevels||[],i=e.key||this.defaultKey;this.set("key",i),this.set("useLocalStorage",t),this.set("scoresToKeep",n),this.set("difficultyLevels",r);var s={};if(this.get("useLocalStorage")){var o=localStorage.getItem(i);o&&(s=JSON.parse(o))}for(var u=0,a=r.length;u<a;u++)s[r[u]]||(s[r[u]]={});this.scores=s},save:function(){if(this.get("useLocalStorage")){var e=JSON.stringify(this.scores);localStorage.setItem(this.get("key"),e)}this.emit("update")},addScore:function(e){var n=3,i=e.difficulty,s=e.photoId,o=this.get("scoresToKeep"),u=this.get("difficultyLevels"),a=t.include(u,i),f=e.who.length<=n;if(!a||!this.scores[i])throw new Error("cannot add score for difficulty level "+
i);if(!f)throw new Error("player name must be "+n+" characters or fewer in length");var l=this.scores[i][s];l?(l.moves.push(e),l.time.push(e),l.time=r(l.time,"time",o),l.moves=r(l.moves,"moves",o)):(l={time:[e],moves:[e]},this.scores[i][s]=l),this.save()},getScores:function(){return this.scores},getTopScores:function(e){var n={};return t.each(this.scores,function(i,s){var o=[],u=[];t.each(t.values(i),function(e){o=o.concat(e.time),u=u.concat(e.moves)}),o=r(o,"time",e),u=r(u,"moves",e),n[s]={time:o,moves:u}}),n},getScoresForGame:function(e,t,i){var s=e.get("difficulty"),o=e.get("photo").id,u=e.get("moves"),a=e.get("time"),f=this.getFilteredScores(s,o);if(i){var l=n({player:"?",photoId:o,difficulty:s,moves:u,time:a});l.forCurrentGame=!0,f.time.push(l),f.moves.push(l),f.time=r(f.time,"time",t),f.moves=r(f.moves,"moves",t)}return f},getFilteredScores:function(e,n){var r;return this.scores[e][n]?r={time:t.clone(this.scores[e][n].time),moves:t.clone(this.scores[e][n].moves)}:r={time:[],moves:
[]},r},isQualifyingScore:function(e){var t=e.difficulty,n=e.photoId,r=e.time,i=e.moves,s=this.get("scoresToKeep"),o=this.getFilteredScores(t,n),u=o.time.length<s;if(u)return!0;var a=o.moves.length<s;if(a)return!0;for(var f=0,l=o.time.length;f<l;f++)if(o.time[f].time>=r)return!0;for(var c=0,h=o.moves.length;c<h;c++)if(o.moves[c].moves>=i)return!0;return!1}});return function(e){return new i(e)}}),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h=[],p=e.config&&e.config()||{};t={version:"2.0.6",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g
,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!
i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("\ufeff")===0&&(r=r.substring(1)),t(r)};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr
(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),p.onXhrComplete&&p.onXhrComplete(s,e))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components
.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("text!../data/photos.json",[],function(){return'[\n  {\n    "id": "pumpkinPatch",\n    "creator": "Mike McCune",\n    "full": "images/puzzle-photos/mccun934-pumpkin-patch.jpg",\n    "thumb": "images/puzzle-photos/mccun934-pumpkin-patch.thumb.jpg"\n  },\n  {\n    "id": "elephantMotherChild",\n    "creator": "Stuart Seeger",\n    "full": "images/puzzle-photos/StuSeeger-elephant-mother-child.jpg",\n    "thumb": "images/puzzle-photos/StuSeeger-elephant-mother-child.thumb.jpg"\n  },\n  {\n    "id": "waterlily",\n    "creator": "Kathleen Tyler Conklin",\n    "full":"images/puzzle-photos/ktylerconk-water-lily.jpg",\n    "thumb": "images/puzzle-photos/ktylerconk-water-lily.thumb.jpg"\n  },\n  {\n    "id": "lion",\n    "creator": "Ian Sane",\n    "full":"images/puzzle-photos/Ian_Sane-zoo-lion.jpg",\n    "thumb": "images/puzzle-photos/Ian_Sane-zoo-lion.thumb.jpg"\n  },\n  {\n    "id": "bridge",\n    "creator": "Ian Sane",\n    "full":"images/puzzle-photos/Ian_Sane-railroad-bridge.jpg",\n    "thumb": "images/puzzle-photos/Ian_Sane-railroad-bridge.thumb.jpg"\n  },\n  {\n    "id": "forestWaterfall",\n    "creator": "Ian Sane",\n    "full":"images/puzzle-photos/Ian_Sane-forest-waterfall.jpg",\n    "thumb": "images/puzzle-photos/Ian_Sane-forest-waterfall.thumb.jpg"\n  },\n  {\n    "id": "brickWall",\n    "creator": "Ian Sane",\n    "full":"images/puzzle-photos/Ian_Sane-brick-wall.jpg",\n    "thumb": "images/puzzle-photos/Ian_Sane-brick-wall.thumb.jpg"\n  },\n  {\n    "id": "leaf",\n    "creator": "Mike McCune",\n    "full":"images/puzzle-photos/mccun934-leaf-water.jpg",\n    "thumb": "images/puzzle-photos/mccun934-leaf-water.thumb.jpg"\n  },\n  {\n    "id": "redWall",\n    "creator": "Ian Sane",\n    "full":"images/puzzle-photos/Ian_Sane-red-wall.jpg",\n    "thumb": "images/puzzle-photos/Ian_Sane-red-wall.thumb.jpg"\n  },\n  {\n    "id": "rockyBeach",\n    "creator": "Kenny Louie",\n    "full":"images/puzzle-photos/kennymatic-rocky-beach.jpg",\n    "thumb": "images/puzzle-photos/kennymatic-rocky-beach.thumb.jpg"\n  },\n  {\n    "id": "trainStation",\n    "creator": "Ralphman",\n    "full":"images/puzzle-photos/Ralphman-train-station.jpg",\n    "thumb": "images/puzzle-photos/Ralphman-train-station.thumb.jpg"\n  },\n  {\n    "id": "dirtyTruck",\n    "creator": "Jonathan Mueller",\n    "full":"images/puzzle-photos/JonoMueller-dirty-truck.jpg",\n    "thumb": "images/puzzle-photos/JonoMueller-dirty-truck.thumb.jpg"\n  },\n  {\n    "id": "purpleCarrots",\n    "creator": "Mason Masteka",\n    "full":"images/puzzle-photos/Mason_Masteka-purple-carrots.jpg",\n    "thumb": "images/puzzle-photos/Mason_Masteka-purple-carrots.thumb.jpg"\n  },\n  {\n    "id": "fairRide",\n    "creator": "Stuart Seeger",\n    "full":"images/puzzle-photos/StuSeeger-fair-ride.jpg",\n    "thumb": "images/puzzle-photos/StuSeeger-fair-ride.thumb.jpg"\n  },\n  {\n    "id": "ferrisWheel",\n    "creator": "Jeff Muceus",\n    "full":"images/puzzle-photos/pdxjeff-ferris-wheel.jpg",\n    "thumb": "images/puzzle-photos/pdxjeff-ferris-wheel.thumb.jpg"\n  },\n  {\n    "id": "baldEagle",\n    "creator": "Chris Miller",\n    "full":"images/puzzle-photos/Sideonecincy-bald-eagle.jpg",\n    "thumb": "images/puzzle-photos/Sideonecincy-bald-eagle.thumb.jpg"\n  },\n  {\n    "id": "tiger",\n    "creator": "Tom Good",\n    "full":"images/puzzle-photos/Thomas_Good-zoo-tiger.jpg",\n    "thumb": "images/puzzle-photos/Thomas_Good-zoo-tiger.thumb.jpg"\n  },\n  {\n    "id": "daylightTrain",\n    "creator": "Sam Churchill",\n    "full":"images/puzzle-photos/sam_churchill-daylight-train.jpg",\n    "thumb": "images/puzzle-photos/sam_churchill-daylight-train.thumb.jpg"\n  },\n  {\n    "id": "puertoRico",\n    "creator": "Ricardo Mangual",\n    "full":"images/puzzle-photos/Puerto_Rico_Vega_Baja_by_Ricardo_Mangual.jpg",\n    "thumb": "images/puzzle-photos/Puerto_Rico_Vega_Baja_by_Ricardo_Mangual.thumb.jpg"\n  },\n  {\n    "id": "tsoMoriri",\n    "creator": "Prabhu B Doss",\n    "full":"images/puzzle-photos/Tso_Moriri_Lake_by_Probhu_B_Doss.jpg",\n    "thumb": "images/puzzle-photos/Tso_Moriri_Lake_by_Probhu_B_Doss.thumb.jpg"\n  }\n]\n'
}),define("photo-collection",["stapes","lodash","text!../data/photos.json"],function(e,t,n){var r=e.subclass(),i=new r,s=JSON.parse(n);return t.each(s,function(e){i.set(e.id,e)}),i}),define("sound",["stapes"],function(e){var t=function(t){var n=this;this.ready=!1,this.isPlaying=!1,this.audio=new Audio,this.audio.autoplay=!1,this.audio.buffer=!0,this.audio.addEventListener("canplaythrough",function(){var e=!n.ready;n.ready=!0,e&&n.emit("ready")}),this.audio.addEventListener("pause",function(){n.audio.currentTime=0,n.isPlaying=!1}),this.audio.addEventListener("play",function(){n.isPlaying=!0}),e.mixinEvents(this),this.audio.src=t};return t.prototype.play=function(){if(!this.ready)return;this.isPlaying&&this.stop(),this.audio.play()},t.prototype.stop=function(){this.audio.pause()},t}),define("sound-board",["sound"],function(e){var t=function(e){this.files=e,this.sounds={}};return t.prototype.load=function(t){return this.sounds[t]||(this.sounds[t]=new e(this.files[t])),this.sounds[t]},t.prototype
.play=function(e){var t=this.load(e);t.ready?t.play():t.on("ready",function(){t.play(),t.off("ready")})},t}),define("api",["lodash","game","leaderboard","photo-collection","sound-board"],function(e,t,n,r,i){var s={easy:{tilesPerSide:2,shuffles:9},hard:{tilesPerSide:3,shuffles:17},brutal:{tilesPerSide:4,shuffles:33}},o=e.keys(s),u=o[0],a=r.get(function(){return!0}),f=t({startingDifficulty:u,startingPhoto:a,difficulties:s,photoCollection:r}),l=n({key:"slider-puzzle-ng-leaderboard",useLocalStorage:!0,scoresToKeep:6,difficultyLevels:o}),c=new i({win:"audio/win.ogg",shuffle:"audio/shuffle.ogg"});return{game:f,leaderboard:l,soundBoard:c}}),define("pages/finish-page",["rye","Q","dust-render","page","leaderboard-mini-widget","game-info-widget","score-save-widget","i18n!../../nls/strings","api"],function(e,t,n,r,i,s,o,u,a){var f=null,l=a.game,c=a.leaderboard,h=a.soundBoard;return r({templateName:"finish",game:l,init:function(r){var a=t.defer(),p=this;h.load("win"),f=e(r);var d={game:l.getAll(),translations
:u};return n(this.templateName,d).then(function(e){f.append(e),p.elt=f.find("[data-page=finish]"),l.on("change:photo",p.setImage.bind(p));var t=p.elt.find("[data-widget=leaderboard-mini]"),n=3;p.leaderboardMini=i(t,l,c,n),p.leaderboardMini.update(),p.leaderboardMini.watch(c),p.leaderboardMini.watch(l);var r=p.elt.find("[data-widget=game-info]");p.gameInfo=s(r,l),p.gameInfo.update(),p.gameInfo.watch(l);var u=p.elt.find("[data-widget=score-save]");p.scoreSave=o(u,l,c),p.scoreSave.update(),p.scoreSave.watch(l,["update:moves","update:time"]),p.scoreSave.on("save",function(e){p.saveScore(e)}),p.enableNavButtons(),setTimeout(function(){a.resolve(p)},0)}),a.promise},saveScore:function(e){this.leaderboardMini.includeCurrentGameInScores=!1,c.addScore(e),this.leaderboardMini.includeCurrentGameInScores=!0},setImage:function(){var e="url("+this.game.get("photo").full+")";this.elt.find(".puzzle-solved").css("background-image",e)},show:function(){this.elt&&(this.elt.removeClass("page-inactive").addClass
("page-active"),h.play("win"))},hide:function(){this.elt&&this.elt.removeClass("page-active").addClass("page-inactive")}})}),define("tile-widget",[],function(){var e=function(e){this.elt=e};return e.prototype.height=function(){return this.elt.offsetHeight},e.prototype.width=function(){return this.elt.offsetWidth},e.prototype.x=function(){if(!arguments.length)return this.elt.offsetLeft;this.elt.style.left=arguments[0]+"px"},e.prototype.y=function(){if(!arguments.length)return this.elt.offsetTop;this.elt.style.top=arguments[0]+"px"},e}),function(e,t){function r(){if(n.READY)return;n.event.determineEventTypes();for(var e in n.gestures)n.gestures.hasOwnProperty(e)&&n.detection.register(n.gestures[e]);n.event.onTouch(n.DOCUMENT,n.EVENT_MOVE,n.detection.detect),n.event.onTouch(n.DOCUMENT,n.EVENT_END,n.detection.detect),n.READY=!0}var n=function(e,t){return new n.Instance(e,t||{})};n.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none"
,userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},n.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,n.HAS_TOUCHEVENTS="ontouchstart"in e,n.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,n.NO_MOUSEEVENTS=n.HAS_TOUCHEVENTS&&navigator.userAgent.match(n.MOBILE_REGEX),n.EVENT_TYPES={},n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.POINTER_MOUSE="mouse",n.POINTER_TOUCH="touch",n.POINTER_PEN="pen",n.EVENT_START="start",n.EVENT_MOVE="move",n.EVENT_END="end",n.DOCUMENT=document,n.plugins={},n.READY=!1,n.Instance=function(e,t){var i=this;return r(),this.element=e,this.enabled=!0,this.options=n.utils.extend(n.utils.extend({},n.defaults),t||{}),this.options.stop_browser_behavior&&n.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),n.event.onTouch(e,n.EVENT_START,function(e){i.enabled&&n.detection.startDetect(i,e)}),this},n.Instance.prototype={on:function(t,n){var r=t.split(" ");for(var i=0
;i<r.length;i++)this.element.addEventListener(r[i],n,!1);return this},off:function(t,n){var r=t.split(" ");for(var i=0;i<r.length;i++)this.element.removeEventListener(r[i],n,!1);return this},trigger:function(t,r){var i=n.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=r;var s=this.element;return n.utils.hasParent(r.target,s)&&(s=r.target),s.dispatchEvent(i),this},enable:function(t){return this.enabled=t,this}};var i=null,s=!1,o=!1;n.event={bindDom:function(e,t,n){var r=t.split(" ");for(var i=0;i<r.length;i++)e.addEventListener(r[i],n,!1)},onTouch:function(t,r,u){var a=this;this.bindDom(t,n.EVENT_TYPES[r],function(f){var l=f.type.toLowerCase();if(l.match(/mouse/)&&o)return;if(l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&f.which===1)s=!0;l.match(/touch|pointer/)&&(o=!0);var c=0;s&&(n.HAS_POINTEREVENTS&&r!=n.EVENT_END?c=n.PointerEvent.updatePointer(r,f):l.match(/touch/)?c=f.touches.length:o||(c=l.match(/up/)?0:1),c>0&&r==n.EVENT_END?r=n.EVENT_MOVE:c||(r=n.EVENT_END
),!c&&i!==null?f=i:i=f,u.call(n.detection,a.collectEventData(t,r,f)),n.HAS_POINTEREVENTS&&r==n.EVENT_END&&(c=n.PointerEvent.updatePointer(r,f))),c||(i=null,s=!1,o=!1,n.PointerEvent.reset())})},determineEventTypes:function(){var t;n.HAS_POINTEREVENTS?t=n.PointerEvent.getEvents():n.NO_MOUSEEVENTS?t=["touchstart","touchmove","touchend touchcancel"]:t=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],n.EVENT_TYPES[n.EVENT_START]=t[0],n.EVENT_TYPES[n.EVENT_MOVE]=t[1],n.EVENT_TYPES[n.EVENT_END]=t[2]},getTouchList:function(t){return n.HAS_POINTEREVENTS?n.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,r,i){var s=this.getTouchList(i,r),o=n.POINTER_TOUCH;if(i.type.match(/mouse/)||n.PointerEvent.matchType(n.POINTER_MOUSE,i))o=n.POINTER_MOUSE;return{center:n.utils.getCenter(s),timeStamp:(new Date).getTime(),target:i.target,touches:s,eventType:r,pointerType:o,srcEvent:i,preventDefault
:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return n.detection.stopDetect()}}}},n.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(e,t){return e==n.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var r={};return r[n.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==n.POINTER_MOUSE,r[n.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==n.POINTER_TOUCH,r[n.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==n.POINTER_PEN,r[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"
]},reset:function(){this.pointers={}}},n.utils={extend:function(n,r,i){for(var s in r){if(n[s]!==t&&i)continue;n[s]=r[s]}return n},hasParent:function(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(t){var n=[],r=[];for(var i=0,s=t.length;i<s;i++)n.push(t[i].pageX),r.push(t[i].pageY);return{pageX:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2,pageY:(Math.min.apply(Math,r)+Math.max.apply(Math,r))/2}},getVelocity:function(t,n,r){return{x:Math.abs(n/t)||0,y:Math.abs(r/t)||0}},getAngle:function(t,n){var r=n.pageY-t.pageY,i=n.pageX-t.pageX;return Math.atan2(r,i)*180/Math.PI},getDirection:function(t,r){var i=Math.abs(t.pageX-r.pageX),s=Math.abs(t.pageY-r.pageY);return i>=s?t.pageX-r.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:t.pageY-r.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(t,n){var r=n.pageX-t.pageX,i=n.pageY-t.pageY;return Math.sqrt(r*r+i*i)},getScale:function(t,n){return t.length>=2&&n.length>=2?this.getDistance(n[0],n[1])/this.getDistance
(t[0],t[1]):1},getRotation:function(t,n){return t.length>=2&&n.length>=2?this.getAngle(n[1],n[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==n.DIRECTION_UP||t==n.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,n){var r,i=["webkit","khtml","moz","ms","o",""];if(!n||!t.style)return;for(var s=0;s<i.length;s++)for(var o in n)n.hasOwnProperty(o)&&(r=o,i[s]&&(r=i[s]+r.substring(0,1).toUpperCase()+r.substring(1)),t.style[r]=n[o]);n.userSelect=="none"&&(t.onselectstart=function(){return!1})}},n.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,r){if(this.current)return;this.stopped=!1,this.current={inst:t,startEvent:n.utils.extend({},r),lastEvent:!1,name:""},this.detect(r)},detect:function(t){if(!this.current||this.stopped)return;t=this.extendEventData(t);var r=this.current.inst.options;for(var i=0,s=this.gestures.length;i<s;i++){var o=this.gestures[i];if(!this.stopped&&r[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect
();break}}return this.current&&(this.current.lastEvent=t),t.eventType==n.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t},stopDetect:function(){this.previous=n.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var r=this.current.startEvent;if(r&&(t.touches.length!=r.touches.length||t.touches===r.touches)){r.touches=[];for(var i=0,s=t.touches.length;i<s;i++)r.touches.push(n.utils.extend({},t.touches[i]))}var o=t.timeStamp-r.timeStamp,u=t.center.pageX-r.center.pageX,a=t.center.pageY-r.center.pageY,f=n.utils.getVelocity(o,u,a);return n.utils.extend(t,{deltaTime:o,deltaX:u,deltaY:a,velocityX:f.x,velocityY:f.y,distance:n.utils.getDistance(r.center,t.center),angle:n.utils.getAngle(r.center,t.center),direction:n.utils.getDirection(r.center,t.center),scale:n.utils.getScale(r.touches,t.touches),rotation:n.utils.getRotation(r.touches,t.touches),startEvent:r}),t},register:function(r){var i=r.defaults||{};return i[r.name]===t&&(i[r.name]=!0),n.utils.extend
(n.defaults,i,!0),r.index=r.index||1e3,this.gestures.push(r),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},n.gestures=n.gestures||{},n.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,r){switch(t.eventType){case n.EVENT_START:clearTimeout(this.timer),n.detection.current.name=this.name,this.timer=setTimeout(function(){n.detection.current.name=="hold"&&r.trigger("hold",t)},r.options.hold_timeout);break;case n.EVENT_MOVE:t.distance>r.options.hold_threshold&&clearTimeout(this.timer);break;case n.EVENT_END:clearTimeout(this.timer)}}},n.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,r){if(t.eventType==n.EVENT_END){var i=n.detection.previous,s=!1;if(t.deltaTime>r.options.tap_max_touchtime||t.distance>r.options.tap_max_distance)return;i&&i.name=="tap"&&t.timeStamp-i.
lastEvent.timeStamp<r.options.doubletap_interval&&t.distance<r.options.doubletap_distance&&(r.trigger("doubletap",t),s=!0);if(!s||r.options.tap_always)n.detection.current.name="tap",r.trigger(n.detection.current.name,t)}}},n.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,r){if(t.eventType==n.EVENT_END){if(r.options.swipe_max_touches>0&&t.touches.length>r.options.swipe_max_touches)return;if(t.velocityX>r.options.swipe_velocity||t.velocityY>r.options.swipe_velocity)r.trigger(this.name,t),r.trigger(this.name+t.direction,t)}}},n.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,r){if(n.detection.current.name!=this.name&&this.triggered){r.trigger(this.name+"end",t),this.triggered=!1;return}if(r.options.drag_max_touches>0&&t.touches.length>r.options.drag_max_touches)return;
switch(t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:if(t.distance<r.options.drag_min_distance&&n.detection.current.name!=this.name)return;n.detection.current.name=this.name;if(n.detection.current.lastEvent.drag_locked_to_axis||r.options.drag_lock_to_axis&&r.options.drag_lock_min_distance<=t.distance)t.drag_locked_to_axis=!0;var i=n.detection.current.lastEvent.direction;t.drag_locked_to_axis&&i!==t.direction&&(n.utils.isVertical(i)?t.direction=t.deltaY<0?n.DIRECTION_UP:n.DIRECTION_DOWN:t.direction=t.deltaX<0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT),this.triggered||(r.trigger(this.name+"start",t),this.triggered=!0),r.trigger(this.name,t),r.trigger(this.name+t.direction,t),(r.options.drag_block_vertical&&n.utils.isVertical(t.direction)||r.options.drag_block_horizontal&&!n.utils.isVertical(t.direction))&&t.preventDefault();break;case n.EVENT_END:this.triggered&&r.trigger(this.name+"end",t),this.triggered=!1}}},n.gestures.Transform={name:"transform",index:45,defaults:
{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,r){if(n.detection.current.name!=this.name&&this.triggered){r.trigger(this.name+"end",t),this.triggered=!1;return}if(t.touches.length<2)return;r.options.transform_always_block&&t.preventDefault();switch(t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:var i=Math.abs(1-t.scale),s=Math.abs(t.rotation);if(i<r.options.transform_min_scale&&s<r.options.transform_min_rotation)return;n.detection.current.name=this.name,this.triggered||(r.trigger(this.name+"start",t),this.triggered=!0),r.trigger(this.name,t),s>r.options.transform_min_rotation&&r.trigger("rotate",t),i>r.options.transform_min_scale&&(r.trigger("pinch",t),r.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case n.EVENT_END:this.triggered&&r.trigger(this.name+"end",t),this.triggered=!1}}},n.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(
t,r){if(r.options.prevent_mouseevents&&t.pointerType==n.POINTER_MOUSE){t.stopDetect();return}r.options.prevent_default&&t.preventDefault(),t.eventType==n.EVENT_START&&r.trigger(this.name,t)}},n.gestures.Release={name:"release",index:Infinity,handler:function(t,r){t.eventType==n.EVENT_END&&r.trigger(this.name,t)}},typeof module=="object"&&typeof module.exports=="object"?module.exports=n:(e.Hammer=n,typeof e.define=="function"&&e.define.amd&&e.define("hammer",[],function(){return n}))}(this),define("hammer",function(){}),define("board-widget",["hammer","rye"],function(e,t){var n=function(e,t,n){return e<t?e=t:e>n&&(e=n),e},r=function(t,n){var r,i,s,o,u=function(){if(n.disabled)return;r=0,i=0,s=t.x(),o=t.y()};e(t.elt).on("dragstart",u).on("drag",function(e){e.gesture&&(e.gesture.preventDefault(),n.applyDelta(t,e.gesture.deltaX-r,e.gesture.deltaY-i),r=e.gesture.deltaX,i=e.gesture.deltaY)}).on("dragend",function(){n.snap(),n.game.incrementMoves(),n.game.checkCompleted()})},i=function(){this.
tiles=[]};return i.prototype.reset=function(e,t,n){this.game=e,this.completed=!1,this.disabled=!1,this.tileWidth=t,this.tileHeight=n,this.rows=e.get("rows"),this.columns=e.get("columns"),this.teardownTiles(),this.tiles=e.get("tiles"),this.setupTiles(e.get("photo").full)},i.prototype.getPosition=function(e){for(var t=0;t<this.tiles.length;t+=1)if(this.tiles[t].tile===e)return this.tiles[t];return null},i.prototype.teardownTiles=function(){for(var t=0;t<this.tiles.length;t+=1)e(this.tiles[t].tile.elt).off("dragstart").off("drag").off("dragend")},i.prototype.setupTiles=function(e){var n=this,i=this.columns*this.tileWidth,s=this.rows*this.tileHeight,o="url("+e+")",u=i+"px "+s+"px",a={"background-image":o,"background-size":u,height:this.tileHeight+"px",width:this.tileWidth+"px",position:"absolute"},f,l,c,h,p,d,v,m,g;for(var y=0;y<this.tiles.length;y++){f=this.tiles[y],l=f.column,c=f.row,h=f.targetColumn,p=f.targetRow,d=(l-1)*this.tileWidth,v=(c-1)*this.tileHeight,m=(h-1)*this.tileWidth,g=(p-1
)*this.tileHeight;var b="-"+m+"px"+" "+"-"+g+"px";a["background-position"]=b,a.left=d+"px",a.top=v+"px",t(f.tile.elt).css(a),r(f.tile,n)}},i.prototype.getTileAtPosition=function(e,t){for(var n=0;n<this.tiles.length;n+=1)if(this.tiles[n].row===t&&this.tiles[n].column===e)return this.tiles[n];return"empty"},i.prototype.getTilesOnRow=function(e,t,n){var r=[],i;e+=n;for(e;e>=1&&e<=this.columns;e+=n){i=this.getTileAtPosition(e,t),r.push(i);if(i==="empty")break}return r},i.prototype.getTilesInColumn=function(e,t,n){var r=[],i;t+=n;for(t;t>=1&&t<=this.rows;t+=n){i=this.getTileAtPosition(e,t),r.push(i);if(i==="empty")break}return r},i.prototype.getTilesAlongAxis=function(e,t,n){var r=e.row,i=e.column,s=[];return t==="horizontal"?s=this.getTilesOnRow(i,r,n):s=this.getTilesInColumn(i,r,n),s},i.prototype.moveTile=function(e,t,r){var i=e.tile,s,o,u,a,f=i.x(),l=i.y(),c,h;r===0?(s=Math.max(0,(e.column-2)*this.tileWidth),o=Math.min(this.tileWidth*this.columns,this.tileWidth*e.column),c=n(f+t,s,o),h=l)
:(u=Math.max(0,(e.row-2)*this.tileHeight),a=Math.min(this.tileHeight*this.rows,this.tileHeight*e.row),h=n(l+r,u,a),c=f),i.x(c),i.y(h);if(c===o||c===s)e.column=1+Math.floor(c/this.tileWidth);else if(h===a||h===u)e.row=1+Math.floor(h/this.tileHeight)},i.prototype.applyDelta=function(e,t,n){var r="horizontal",i;Math.abs(n)>Math.abs(t)?(r="vertical",i=n<0?-1:1,n=parseInt(n,10),t=0):(i=t<0?-1:1,t=parseInt(t,10),n=0);var s=this.getPosition(e),o=this.getTilesAlongAxis(s,r,i);if(o.length<1||o.pop()!=="empty")return;this.moveTile(s,t,n);for(var u=o.length-1;u>=0;u-=1)this.moveTile(o[u],t,n)},i.prototype.snap=function(){var e,t,n,r,i,s;for(var o=0;o<this.tiles.length;o+=1){var u=this.tiles[o].tile;e=u.x(),n=1+Math.round(e/this.tileWidth),r=(n-1)*this.tileWidth,t=u.y(),i=1+Math.round(t/this.tileHeight),s=(i-1)*this.tileHeight;if(e!==r||t!==s)u.x(r),u.y(s),this.tiles[o].column=n,this.tiles[o].row=i}},i}),define("puzzle-widget",["lodash","rye","tile-widget","board-widget","dust-render","data-widget"
,"i18n!../nls/strings"],function(e,t,n,r,i,s,o){return function(e,u){var a=s({elt:e,templateName:"puzzle-widget",game:u,board:new r,refresh:function(){var e=t(this.elt),r=this.game.get("tiles"),i;for(var s=0;s<r.length;s+=1){var o=r[s];i='[data-column="'+o.column+'"][data-row="'+o.row+'"]';var a=e.find(i).get(0);o.tile=new n(a)}var f=e.find(".puzzle-frame").get(0),l=f.offsetWidth/this.game.get("columns"),c=f.offsetHeight/this.game.get("rows");this.board.reset(u,l,c)},pause:function(){this.elt.find(".puzzle-tiled").attr("data-puzzle-frame-state","hidden"),this.elt.find(".puzzle-solved").attr("data-puzzle-frame-state","visible"),this.elt.find(".puzzle-pause-overlay").attr("data-overlay-state","visible")},start:function(){this.elt.find(".puzzle-tiled").attr("data-puzzle-frame-state","visible"),this.elt.find(".puzzle-solved").attr("data-puzzle-frame-state","hidden"),this.elt.find(".puzzle-pause-overlay").attr("data-overlay-state","hidden")},render:function(){var e={rows:this.game.get("rows"
),columns:this.game.get("columns"),photoUrl:this.game.get("photo").full,tiles:this.game.get("tiles"),translations:o};return i(this.templateName,e)}});return a}}),define("slide-menu-widget",["rye","stapes"],function(e,t){var n=function(e,t){var n=this;this.elt=e,this.menuCtrlElt=this.elt.find(".slide-menu-control"),this.otherMenuElt=t,this.slide=function(){var e=this.elt,t=this.menuCtrlElt,r=this.otherMenuElt,i=r.attr("data-menu-state")!=="in",s=e.attr("data-menu-state")==="animating";if(i||s)return;var o=e.attr("data-menu-side"),u=e.attr("data-menu-state"),a=u==="in"?"out":"in",f="slide-menu-"+o+"-"+a,l=a==="out"?"close":"open",c=function(){e.attr("data-menu-state",a),t.attr("data-menu-action",l),n.emit(a),e.removeListener("webkitAnimationEnd"),e.removeListener("animationend")};e.addListener("webkitAnimationEnd",c),e.addListener("animationend",c),n.emit("animating-"+a),e.attr("data-menu-state","animating"),e.css({"-webkit-animation-name":f,"animation-name":f})},this.close=function(){this
.elt.removeListener("webkitAnimationEnd"),this.elt.removeListener("animationend"),this.elt.attr("data-menu-state","in"),this.elt.css({"-webkit-animation-name":"","animation-name":""}),this.menuCtrlElt.attr("data-menu-action","open")},this.elt.on("click",function(){n.slide()})};return function(e,r){var i=new n(e,r);return t.mixinEvents(i),i}}),define("game-level-select-widget",["lodash","rye","stapes","dust-render","data-widget","i18n!../nls/strings"],function(e,t,n,r,i,s){return function(o,u){var a=i({elt:o,templateName:"game-level-select",game:u,highlightLevel:function(e){var n=this.elt.find(".level-select-btn");n.each(function(n){n=t(n),n.attr("data-level")===e?n.attr("data-current","true"):n.attr("data-current","false")})},refresh:function(){var e=this;e.elt.find(".level-select-btn").removeListener("click").on("click",function(n){var r=t(n.target),i=r.attr("data-current")==="true";if(!i){var s=r.attr("data-level");r.attr("data-current","true"),e.highlightLevel(s),e.emit("select",s)}}
)},render:function(){var t=u.get("difficulty"),n=e.map(u.difficulties,function(e,n){var r={level:n,name:s[n],current:"false"};return n===t&&(r.current="true"),r});return r(this.templateName,{difficulties:n,translations:s})}});return n.mixinEvents(a),a}}),define("pages/game-page",["rye","Q","page","puzzle-widget","slide-menu-widget","game-info-widget","leaderboard-mini-widget","game-level-select-widget","dust-render","i18n!../../nls/strings","api"],function(e,t,n,r,i,s,o,u,a,f,l){var c=null,h=l.game,p=l.leaderboard,d=l.soundBoard;return n({templateName:"game",init:function(n){var l=t.defer(),v=this;return d.load("shuffle"),c=e(n),a(this.templateName,{translations:f}).then(function(e){c.append(e),v.elt=c.find("[data-page=game]");var t=v.elt.find("[data-widget=puzzle]");v.puzzleWidget=r(t,h);var n=v.elt.find(".slide-menu[data-menu-side=left]"),a=v.elt.find(".slide-menu[data-menu-side=right]");v.leftMenu=i(n,a),v.rightMenu=i(a,n),v.leftMenu.on("in",function(){h.start(),v.puzzleWidget.start(
)}),v.leftMenu.on("animating-out",function(){h.pause(),v.puzzleWidget.pause()}),v.rightMenu.on("in",function(){h.start(),v.puzzleWidget.start()}),v.rightMenu.on("animating-out",function(){h.pause(),v.puzzleWidget.pause()});var f=v.leftMenu.elt.find("[data-widget=game-info]"),m=!0;v.gameInfo=s(f,h,m),v.gameInfo.update();var g=v.leftMenu.elt.find("[data-widget=leaderboard-mini]"),y=3;v.leaderboardMini=o(g,h,p,y),v.leaderboardMini.update();var b="[data-widget=game-level-select]",w=v.rightMenu.elt.find(b);v.levelSelect=u(w,h),v.levelSelect.watch(h,["update:difficulty"]),v.levelSelect.update(),v.levelSelect.on("select",function(e){d.play("shuffle"),h.setDifficulty(e),h.reset()}),v.playAgainBtn=v.rightMenu.elt.find("[data-menu-action=reset]"),v.playAgainBtn.on("click",function(){d.play("shuffle"),v.rightMenu.slide(),h.reset()}),v.enableNavButtons(),v.gameInfo.watch(h),v.leaderboardMini.watch(p),v.leaderboardMini.watch(h),v.puzzleWidget.watch(h,["reset"]),h.on("completed",function(){h.pause(),
v.loadPageAndNavigate("finish")}),setTimeout(function(){l.resolve(v)},0)}),l.promise},show:function(e){d.play("shuffle");var t=e.difficulty,n=h.getPhotoById(e.photoId),r=t&&t!==h.get("difficulty"),i=n&&n!==h.get("photo");r&&h.set("difficulty",t),i&&h.set("photo",n),this.elt.removeClass("page-inactive").addClass("page-active"),h.reset()},hide:function(){this.elt&&(this.elt.removeClass("page-active").addClass("page-inactive"),this.rightMenu.close(),this.leftMenu.close())}})}),define("pages/help-page",["Q","rye","dust-render","page"],function(e,t,n,r){return r({elt:null,templateName:"help",init:function(r){var i=e.defer(),s=this;return this.parentElt=t(r),n(this.templateName).then(function(e){s.parentElt.append(e),s.elt=s.parentElt.find("[data-page=help]"),s.enableNavButtons(),setTimeout(function(){i.resolve(s)},0)}),i.promise},show:function(){this.elt.removeClass("page-inactive").addClass("page-active")},hide:function(){this.elt&&this.elt.removeClass("page-active").addClass("page-inactive"
)}})}),define("pages/home-page",["Q","rye","page","dust-render","i18n!../../nls/strings"],function(e,t,n,r,i){return n({elt:null,templateName:"home",init:function(n){var s=e.defer(),o=this;return this.elt=t(n),r(this.templateName,{translations:i}).then(function(e){o.elt.find(".home-btn-panel").append(e),setTimeout(function(){o.enableNavButtons(),s.resolve(o)},0)}),s.promise},show:function(){this.elt.removeClass("page-inactive").addClass("page-active")},hide:function(){this.elt&&this.elt.removeClass("page-active").addClass("page-inactive")}})}),define("pages/leaderboard-page",["rye","Q","lodash","score-display-helpers","page","photo-collection","dust-render","i18n!../../nls/strings","api"],function(e,t,n,r,i,s,o,u,a){var f=a.leaderboard,l=function(e){var t,r;return n.map(e,function(e){return t=e.photoId,r=s.get(t),r&&(e.photoThumb=r.thumb),e})};return i({templateName:"leaderboard",scoresToDisplay:f.get("scoresToKeep"),init:function(t){var n=this;return n.parentElt=e(t),f.on("update",function(
){n.update()}),n.update()},activateFilter:function(t){var n=this.elt.find("[data-leaderboard-filter-control]");n.each(function(n){var r=e(n);r.attr("data-leaderboard-filter-control")===t?r.attr("data-current","true"):r.attr("data-current","false")}),this.elt.attr("data-leaderboard-filter",t)},update:function(){var i=t.defer(),s=this.scoresToDisplay,a=this,c=f.getTopScores(s),h={translations:u,sortedScores:[]};return n.each(c,function(e,t){var n=r.pad(e,s);n.scoresByTime=l(n.scoresByTime),n.scoresByMoves=l(n.scoresByMoves),h.sortedScores.push({difficultyLevelName:u[t],difficultyLevel:t,scoresForLevel:n})}),o(this.templateName,h).then(function(t){var n=a.parentElt.find("[data-page=leaderboard]");n&&(a.parentElt.find("[data-leaderboard-filter-control]").removeListener("click"),n.remove()),a.parentElt.append(t),a.elt=a.parentElt.find("[data-page=leaderboard]"),a.parentElt.find("[data-leaderboard-filter-control]").on("click",function(t){var n=e(t.target).attr("data-leaderboard-filter-control"
);a.activateFilter(n)}),a.enableNavButtons(),setTimeout(function(){i.resolve(a)},0)},i.reject),i.promise},show:function(){this.activateFilter("time"),this.elt.removeClass("page-inactive").addClass("page-active")},hide:function(){this.elt&&this.elt.removeClass("page-active").addClass("page-inactive")}})}),define("pages/photopicker-page",["rye","Q","dust-render","page","photo-collection","i18n!../../nls/strings"],function(e,t,n,r,i,s){return r({init:function(n){var r=t.defer(),o=this;return this.templateName="photopicker",this.data={photos:i.getAllAsArray(),translations:s},this.parentElt=e(n),r.resolve(o),r.promise},showElement:function(){var e=this.elt;e.removeClass("page-inactive").addClass("page-active"),setTimeout(function(){e.find('[data-widget="gallery"]').get(0).scrollTop=0},0)},show:function(){if(this.elt)this.showElement();else{var e=this;n(this.templateName,this.data).then(function(t){e.parentElt.append(t),e.elt=e.parentElt.find("[data-page=photopicker]"),e.enableNavButtons(),e.
showElement()})}},hide:function(){this.elt&&this.elt.removeClass("page-active").addClass("page-inactive")}})}),define("pages/photopopup-page",["rye","Q","lodash","dust-render","page","photo-collection","i18n!../../nls/strings"],function(e,t,n,r,i,s,o){return i({init:function(n){var r=t.defer();return this.templateName="photopopup",this.parentElt=e(n),r.resolve(this),r.promise},showElement:function(){this.elt.removeClass("page-inactive").addClass("page-active"),this.enableNavButtons()},show:function(e){var t=this,i=e.photoId,u=s.get(i),a={photo:u,translations:o};r(this.templateName,a).then(function(e){var r=t.parentElt.find("[data-page=photopopup]"),i;r&&(i=t.parentElt.find(".photopopup-image"),i.removeListener("load"),r.remove()),t.parentElt.append(e),t.elt=t.parentElt.find("[data-page=photopopup]"),i=t.parentElt.find(".photopopup-image"),i.on("load",n.bind(t.showElement,t))})},hide:function(){this.elt&&this.elt.removeClass("page-active").addClass("page-inactive")}})});
!function(){function a(a,c){return a.write('<div data-page="finish" class="page-inactive"><div class="overlay vbox box-pack-center-align-center"><h1 class="overlay-text">').reference(c.getPath(!1,["translations","wellDone"]),c,"h").write('</h1></div><div class="finish-ribbon finish-ribbon-out hbox box-pack-center-align-center"><div class="finish-ribbon-panel"><div class="hbox box-pack-start-align-center"data-widget="game-info"></div><div class="hbox box-pack-start-align-center"><div class="hbox box-pack-start-align-center"data-widget="score-save"></div><input type="button" class="text-only-btn"data-nav="home" value="').reference(c.getPath(!1,["translations","done"]),c,"h").write('" disabled="disabled"></div></div><div class="finish-ribbon-panel" data-widget="leaderboard-mini"></div></div><div class="game-image-container hbox box-pack-center-align-center"><div class="puzzle-frame puzzle-solved" data-puzzle-frame-state="visible"style="background-image: url(').section(c.getPath(!1,["game","photo"]),c,{block:b},null).write(');"></div></div></div>')}function b(a,b){return a.reference(b.get("full"),b,"h")}return dust.register("finish",a),a}(),function(){function a(a,c){return a.write('<div class="game-info-line game-info-moves">').reference(c.getPath(!1,["translations","moves"]),c,"h").write(": ").reference(c.getPath(!1,["game","moves"]),c,"h").write('</div><div class="game-info-line game-info-time">').reference(c.getPath(!1,["translations","time"]),c,"h").write(": ").reference(c.getPath(!1,["game","time"]),c,"h",["dateFilter"]).write("</div>").exists(c.get("photoCredit"),c,{block:b},null)}function b(a,b){return a.write('<div class="game-info-line game-info-photo-credit">').reference(b.getPath(!1,["translations","photo"]),b,"h").write(": ").reference(b.get("photoCredit"),b,"h").write("</div>")}return dust.register("game-info",a),a}(),function(){function a(a,c){return a.write('<div class="level-select-container"><h1 class="mini-heading level-select-mini-heading">').reference(c.getPath(!1,["translations","chooseLevel"]),c,"h").write('</h1><div class="level-select-btn-panel hbox box-pack-start-align-center">').section(c.get("difficulties"),c,{block:b},null).write("</div></div>")}function b(a,b){return a.write('<input type="button" class="text-only-btn level-select-btn choice-btn"data-current="').reference(b.get("current"),b,"h").write('" data-level="').reference(b.get("level"),b,"h").write('" value="').reference(b.get("name"),b,"h").write('">')}return dust.register("game-level-select",a),a}(),function(){function a(a,b){return a.write('<div data-page="game" class="page-inactive"><div class="game-image-container hbox box-pack-center-align-center" data-widget="puzzle"></div><!-- left slide menu --><div class="slide-menu hbox box-pack-end-align-center" data-menu-side="left" data-menu-state="in"><div class="slide-menu-panel vbox box-pack-start-align-start" data-widget="game-info"></div><div class="slide-menu-panel" data-widget="leaderboard-mini"></div><div class="slide-menu-panel slide-menu-btn-panel"><div class="text-only-btn" data-nav="leaderboard"disabled="disabled">').reference(b.getPath(!1,["translations","leaderboard"]),b,"h").write('</div></div><div class="slide-menu-control vbox box-pack-center-align-center icon round-icon" data-menu-action="open"></div></div><!-- right slide menu --><div class="slide-menu hbox box-pack-start-align-center" data-menu-side="right" data-menu-state="in"><div class="slide-menu-control vbox box-pack-center-align-center icon round-icon" data-menu-action="open"></div><div class="slide-menu-panel" data-widget="game-level-select"></div><div class="slide-menu-panel slide-menu-play-again-panel"><div class="text-only-btn"data-menu-action="reset">').reference(b.getPath(!1,["translations","playAgain"]),b,"h").write('</div></div><div class="slide-menu-panel slide-menu-choose-photo-panel"><div class="text-only-btn" data-nav="photopicker"disabled="disabled">').reference(b.getPath(!1,["translations","choosePhoto"]),b,"h").write("</div></div></div></div>")}return dust.register("game",a),a}(),function(){function a(a){return a.write('<div data-page="help" class="page-inactive"><div class="overlay overlay-opaque vbox box-pack-center-align-center"></div><div class="popup vbox box-pack-center-align-center"><div class="popup-box vbox box-pack-start-align-center help-popup"><div class="help-content-btn-bar hbox box-pack-end-align-center"><button disabled="disabled" class="icon close-btn"data-nav="home" data-icon="close">&nbsp;</button></div><div class="help-content-panel"><p>The Slider Puzzle slices up a picture and jumbles the pieces. Reassemble the picture in the quickest time or fewest moves.</p><p>Select <em>Quick Start</em> or <em>Choose Photo</em> to start a game.</p><p>Once the puzzle appears, the clock starts ticking. Move pieces by sliding them. To pause the game and display the completed puzzle, use the <span class="icon" data-icon="pause"></span> button. To play again, or change the difficulty level, use the <span class="icon" data-icon="plus"></span> button.</p><p>After you finish a puzzle, your score may qualify for the Leader Board. If it does, enter your name (up to 3 characters), then select <em>Save</em> to record it. Selecting <em>Done</em> takes you back to the home screen.</p><p>Slider Puzzle is an Intel open source project, released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>. All images were released on Flickr under Creative Commons licences. Read more about the project <a href="https://01.org/html5webapps/">on the 01.org website</a>.</p></div></div></div></div>')}return dust.register("help",a),a}(),function(){function a(a,b){return a.write('<input type="button" class="text-only-btn" data-nav="game"disabled="disabled" value="').reference(b.getPath(!1,["translations","quickStart"]),b,"h").write('"><input type="button" class="text-only-btn" data-nav="leaderboard"disabled="disabled" value="').reference(b.getPath(!1,["translations","leaderboard"]),b,"h").write('"><input type="button" class="text-only-btn" data-nav="photopicker"disabled="disabled" value="').reference(b.getPath(!1,["translations","choosePhoto"]),b,"h").write('">')}return dust.register("home",a),a}(),function(){function a(a,c){return a.write('<h1 class="mini-heading">').reference(c.getPath(!1,["translations","highScores"]),c,"h").write('</h1><div class="leaderboard-mini-scores hbox box-pack-center-align-center"><div class="leaderboard-mini-moves">').section(c.getPath(!1,["scores","scoresByMoves"]),c,{block:b},null).write('</div><div class="leaderboard-mini-times">').section(c.getPath(!1,["scores","scoresByTime"]),c,{block:g},null).write("</div></div>")}function b(a,b){return a.write('<p><span class="leaderboard-mini-position">').reference(b.get("position"),b,"h").write("</span>&nbsp;&nbsp;").exists(b.get("forCurrentGame"),b,{"else":c,block:f},null).write("</p>")}function c(a,b){return a.exists(b.get("who"),b,{"else":d,block:e},null)}function d(a){return a.write("-----")}function e(a,b){return a.reference(b.get("who"),b,"h").write(" ").reference(b.get("moves"),b,"h")}function f(a,b){return a.write('<span class="leaderboard-current-game">').reference(b.get("who"),b,"h").write(" ").reference(b.get("moves"),b,"h").write("</span>")}function g(a,b){return a.write('<p><span class="leaderboard-mini-position">').reference(b.get("position"),b,"h").write("</span>&nbsp;&nbsp;").exists(b.get("forCurrentGame"),b,{"else":h,block:k},null).write("</p>")}function h(a,b){return a.exists(b.get("who"),b,{"else":i,block:j},null)}function i(a){return a.write("-----")}function j(a,b){return a.reference(b.get("who"),b,"h").write(" ").reference(b.get("time"),b,"h",["dateFilter"])}function k(a,b){return a.write('<span class="leaderboard-current-game">').reference(b.get("who"),b,"h").write(" ").reference(b.get("time"),b,"h",["dateFilter"]).write("</span>")}return dust.register("leaderboard-mini",a),a}(),function(){function a(a,c){return a.write('<div data-page="leaderboard" class="page-inactive" data-leaderboard-filter="time"><div class="hbox"><div class="box-panel vbox box-pack-center-align-start"><h1 class="page-heading">').reference(c.getPath(!1,["translations","leaderboard"]),c,"h").write('</h1></div><div class="box-panel hbox"><input type="button" class="text-only-btn choice-btn"data-leaderboard-filter-control="time"data-current="true" value="').reference(c.getPath(!1,["translations","time"]),c,"h").write('"><input type="button" class="text-only-btn choice-btn"data-leaderboard-filter-control="moves" data-current="false"value="').reference(c.getPath(!1,["translations","moves"]),c,"h").write('"></div><div class="box-panel hbox box-pack-end-align-center"><button disabled="disabled" class="icon close-btn"data-nav="home" data-icon="close">&nbsp;</button></div></div><div class="leaderboard-scores hbox" data-leaderboard-by="time">').section(c.get("sortedScores"),c,{block:b},null).write('</div><div class="leaderboard-scores hbox" data-leaderboard-by="moves">').section(c.get("sortedScores"),c,{block:h},null).write("</div></div>")}function b(a,b){return a.write('<div class="leaderboard-scores-for-difficulty"><h2 class="leaderboard-difficulty-heading">').reference(b.get("difficultyLevelName"),b,"h").write("</h2>").section(b.get("scoresForLevel"),b,{block:c},null).write("</div>")}function c(a,b){return a.section(b.get("scoresByTime"),b,{block:d},null)}function d(a,b){return a.write('<div class="leaderboard-scores-container"><div class="leaderboard-score-position">').reference(b.get("position"),b,"h").write('.&nbsp;</div><div class="leaderboard-score-details">').exists(b.get("who"),b,{"else":e,block:f},null).write('</div><div class="leaderboard-thumb vbox box-pack-center-align-center">').exists(b.get("photoThumb"),b,{block:g},null).write("</div></div>")}function e(a){return a.write("---")}function f(a,b){return a.reference(b.get("who"),b,"h").write("<br>").reference(b.get("time"),b,"h",["dateFilter"])}function g(a,b){return a.write('<img src="').reference(b.get("photoThumb"),b,"h").write('"data-nav="game/photoId:').reference(b.get("photoId"),b,"h").write("/difficulty:").reference(b.get("difficultyLevel"),b,"h").write('">')}function h(a,b){return a.write('<div class="leaderboard-scores-for-difficulty"><h2 class="leaderboard-difficulty-heading">').reference(b.get("difficultyLevelName"),b,"h").write("</h2>").section(b.get("scoresForLevel"),b,{block:i},null).write("</div>")}function i(a,b){return a.section(b.get("scoresByMoves"),b,{block:j},null)}function j(a,b){return a.write('<div class="leaderboard-scores-container"><div class="leaderboard-score-position">').reference(b.get("position"),b,"h").write('.&nbsp;</div><div class="leaderboard-score-details">').exists(b.get("who"),b,{"else":k,block:l},null).write('</div><div class="leaderboard-thumb vbox box-pack-center-align-center">').exists(b.get("photoThumb"),b,{block:m},null).write("</div></div>")}function k(a){return a.write("---")}function l(a,b){return a.reference(b.get("who"),b,"h").write("<br>").reference(b.get("moves"),b,"h")}function m(a,b){return a.write('<img src="').reference(b.get("photoThumb"),b,"h").write('"data-nav="game/photoId:').reference(b.get("photoId"),b,"h").write("/difficulty:").reference(b.get("difficultyLevel"),b,"h").write('">')}return dust.register("leaderboard",a),a}(),function(){function a(a,c){return a.write('<div data-page="photopicker" class="page-inactive"><div class="hbox"><div class="box-panel vbox box-pack-center-align-start"><h1 class="page-heading">').reference(c.getPath(!1,["translations","choosePhoto"]),c,"h").write('</h1></div><div class="box-panel hbox box-pack-end-align-center"><button disabled="disabled" class="icon close-btn"data-nav="home" data-icon="close">&nbsp;</button></div></div><div class="photopicker-gallery" data-widget="gallery">').section(c.get("photos"),c,{block:b},null).write("</div></div>")}function b(a,b){return a.write('<div class="photopicker-frame vbox box-pack-center-align-center"><img src="').reference(b.get("thumb"),b,"h").write('" class="photopicker-image"data-nav-rel="popup" data-nav="photopopup/photoId:').reference(b.get("id"),b,"h").write('"></div>')}return dust.register("photopicker",a),a}(),function(){function a(a,b){return a.write('<div data-page="photopopup" class="page-inactive"><div class="overlay overlay-opaque vbox box-pack-center-align-center"></div><div class="popup vbox box-pack-center-align-center"><div class="popup-box photopopup-box vbox box-pack-start-align-center"><button disabled="disabled" class="icon photopopup-box-close close-btn"data-nav="photopicker" data-icon="close">&nbsp;</button><img class="photopopup-image" src="').reference(b.getPath(!1,["photo","full"]),b,"h").write('"><div class="photopopup-btn-panel"><input type="button" class="text-only-btn"data-nav="game/photoId:').reference(b.getPath(!1,["photo","id"]),b,"h").write('" disabled="disabled"value="').reference(b.getPath(!1,["translations","play"]),b,"h").write('"></div></div></div></div>')}return dust.register("photopopup",a),a}(),function(){function a(a,c){return a.write('<div class="overlay puzzle-pause-overlay vbox box-pack-center-align-center" data-overlay-state="hidden"><h1 class="overlay-text">').reference(c.getPath(!1,["translations","paused"]),c,"h").write('</h1></div><div class="puzzle-frame puzzle-tiled" data-rows="').reference(c.get("rows"),c,"h").write('" data-columns="').reference(c.get("columns"),c,"h").write('">').section(c.get("tiles"),c,{block:b},null).write('</div><div class="puzzle-frame puzzle-solved" data-puzzle-frame-state="hidden"style="background-image: url(').reference(c.get("photoUrl"),c,"h").write(');"></div>')}function b(a,b){return a.write('<div class="puzzle-tile" data-row="').reference(b.get("row"),b,"h").write('" data-column="').reference(b.get("column"),b,"h").write('" data-empty="').reference(b.get("empty"),b,"h").write('"></div>')}return dust.register("puzzle-widget",a),a}(),function(){function a(a,d){return a.exists(d.get("qualifyingScore"),d,{"else":b,block:c},null)}function b(a,b){return a.write('<span class="finish-score-no-good">').reference(b.getPath(!1,["translations","notQualifying"]),b,"h").write("</span>")}function c(a,b){return a.write('<label for="name-entry">').reference(b.getPath(!1,["translations","yourName"]),b,"h").write(':</label>&nbsp;<input type="text" id="name-entry" name="name-entry"class="text-entry" size="4" maxlength="3"><input type="button" class="text-only-btn finish-save-btn"id="save-score" name="save-score" disabled="disabled"value="').reference(b.getPath(!1,["translations","save"]),b,"h").write('">')}return dust.register("score-save",a),a}();